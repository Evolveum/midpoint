= Resource wizard: Object type mappings
:page-nav-title: Mappings
:page-toc: top
:experimental:
:page-since: "4.9"

Mapping is a mechanism that takes input properties from the source, transforms them, and insers the result into another property that is then used by a resource.
In other words, mapping allows you to use the data from your source systems, such as HR applications, and adapt them so that you can use them in your target systems, such as LDAP.

To access mappings, click icon:database[] *Resources* > icon:database[] *All resources* > *your_resource* > icon:male[] *Accounts* > icon:cog[] *Configure* > icon:retweet[] *Mappings*.

image::step-2-mappings-inbound.png[link=step-2-mappings-inbound.png, 100%, title=Table of inbound mappings]

For a more technical description, see also the following pages:

* xref:/midpoint/reference/resources/resource-configuration/schema-handling/[Resource Schema Handling]
* xref:/midpoint/reference/expressions/mappings/[Mappings]
* xref:/midpoint/reference/expressions/[MidPoint Expressions and Mappings]
* xref:/midpoint/reference/expressions/mappings/inbound-mapping/[Inbound mappings]
* xref:/midpoint/reference/expressions/mappings/outbound-mapping/[Outbound mappings]

== Inbound mappings

Inbound mapping transforms data from authoritative sources to midPoint. Typically, it is used to populate new user objects with data from an HR system.
See the xref:/midpoint/reference/expressions/mappings/inbound-mapping/[inbound mappings] page for more details.

To add a new inbound mapping:

. Click icon:circle-plus[] btn:[Add inbound].
. Configure the following: +
* *Name* of the mapping. While not mandatory, this is convenient during troubleshooting and when using xref:/midpoint/reference/resources/resource-configuration/inheritance/[resource template inheritance].
* *From resource attribute* defines the resource attribute that is used as the source of the mapping.
* *Expression* specifies how the source attribute is used. You can choose from the following xref:/midpoint/reference/expressions/expressions/[expression types]:
** *As is* (default) copies the value from the resource attribute to the midPoint target property.
** *Literal* Upon clicking btn:[Show values],allows you to specify a constant value.
** *Script* Upon clicking btn:[Show script],allows you to write a more complex behavior using a xref:/midpoint/reference/expressions/expressions/[midPoint expression] (by default in Groovy).
** *Generate* allows you to generate a random string using a xref:/midpoint/reference/security/credentials/password-policy/#value-policy[value policy]. This is typically used for generating passwords. Upon clicking btn:[Show generate], you can choose from the following options in the Mode menu:
*** *Undefined* generates passwords without specific constraints based on the default random generation method.
*** *Policy* requires you to select a value policy that controls the password generation.
*** *Universal Unique Identifier* generates passwords in the form of a Universal Unique Identifier (UUID). This is useful when you need passwords that are guaranteed to be unique and not easily guessable.
** *Path* 
* *Target* allows you to type (with autocompletion) the midPoint property that should be used to store the value generated by the inbound mapping
* *Lifecycle state* allows you to define the lifecycle state of the mapping. This can be used during xref:/midpoint/reference/admin-gui/simulations/[Simulations], e.g. specifying lifecycle state as `Proposed` will be used only to simulate the mapping, `Draft` disables the mapping etc.
. Click icon:check[] btn:[Save mappings]


TIP: Adding new mappings to existing configuration can utilize simulations if you use `Proposed` as the new mappings' lifecycle state. Such mappings can be simulated without influencing the real data.

More complex configuration is possible by clicking btn:[Edit] button:

[%autowidth, cols="a,a", frame=none, grid=none, role=center]
|===
| image::step-2-mappings-inbound-detail-main.png[link=step-2-mappings-inbound-detail-main.png, 100%, title=Main configuration of inbound mapping (complex view)]
| image::step-2-mappings-inbound-detail-optional.png[link=step-2-mappings-inbound-detail-optional.png, 100%, title=Optional configuration of inbound mapping (complex view)]
|===

[#use_inbound_for_correlation]
You can define the inbound mapping as ordinary (default), or you can specify *Use for* parameter with value `Correlation` in the *Optional configuration* of the mapping to use the mapping only during the correlation.
This is how you can define inbound mappings to be used in <<Correlation>> when item correlator is used, even for target resources where you normally have no inbound mappings at all.
For more information, please refer to xref:/midpoint/reference/correlation/#example-4-correlation-for-outbound-resources[this example for correlation-only inbound mapping].

Mapping can be deleted by clicking btn:[Delete] button.

Mappings can be saved by clicking btn:[Save mappings] and wizard will return to the previous page from which you started mapping editor.

Click btn:[Attribute overrides] if you need to xref:/midpoint/reference/resources/resource-configuration/schema-handling/#attribute-definitions[override attribute(s) visibility or other behavior].

== Outbound Mappings

Use xref:/midpoint/reference/expressions/mappings/outbound-mapping/[outbound mappings] to populate resource attribute values from midPoint properties.

Click btn:[Add outbound] to add a new outbound mapping.

To define a mapping, you need to configure:

* *Name* of the mapping. This is technically not mandatory, but helps a lot during troubleshooting and when using resource template inheritance.
* *Source* allows you to type (with autocompletion) the midPoint property that should be used as a source for this outbound mapping
+
TIP: Even multiple source attributes can be defined for an outbound mapping.
* *Expression* specifies how the source attribute(s) should be used. Resource wizard support the following xref:/midpoint/reference/expressions/expressions/[expression types]:
** *As is* (default) simply copies the value from resource attribute to midPoint target property
** *Literal* allows to specify a constant value
** *Script* allows to write a more complex behavior using a xref:/midpoint/reference/expressions/expressions/[midPoint expression] (by default in Groovy language)
** *Generate* allows to generate a random string using a value policy (useful for generating passwords)
* *To resource attribute* allows you to type (with autocompletion) the resource attribute that should be used as a target of the mapping.
* *Lifecycle state* allows you to define the lifecycle state of the mapping. This can be used during xref:/midpoint/reference/admin-gui/simulations/[Simulations], e.g. specifying lifecycle state as `Proposed` will be used only to simulate the mapping, `Draft` disables the mapping etc.

image::step-2-mappings-outbound.png[link=step-2-mappings-outbound.png, 100%, title=Table of outbound mappings]

TIP: Adding new mappings to existing configuration can utilize simulations if you use `Proposed` as the new mappings' lifecycle state. Such mappings can be simulated without influencing the real data.

More complex configuration is possible by clicking btn:[Edit] button:

[%autowidth, cols="a,a", frame=none, grid=none, role=center]
|===
| image::step-2-mappings-outbound-detail-main.png[link=step-2-mappings-outbound-detail-main.png, 100%, title=Main configuration of outbound mapping (complex view)]
| image::step-2-mappings-outbound-detail-optional.png[link=step-2-mappings-outbound-detail-optional.png, 100%, title=Optional configuration of outbound mapping (complex view)]
|===

Mapping can be deleted by clicking btn:[Delete] button.

Mappings can be saved by clicking btn:[Save mappings] and wizard will return to the previous page from which you started mapping editor.

Click btn:[Attribute overrides] if you need to xref:/midpoint/reference/resources/resource-configuration/schema-handling/#attribute-definitions[override attribute(s) visibility or other behavior].

== Attribute override

Attribute configuration can be xref:/midpoint/reference/resources/resource-configuration/schema-handling/#attribute-definitions[overridden] beyond the context of the mappings.
This is useful to override attribute visibility, its display name, tolerance etc.

{empty} +
[%autowidth, cols="a,a", frame=none, grid=none, role=center]
|===

2+| image::step-2-mappings-override.png[link=step-2-mappings-override.png, 100%, title=Table of attribute overrides]

| image::step-2-mappings-override-detail-basic.png[link=step-2-mappings-override-detail-basic.png, 100%, title=Detailed configuration of attribute override configuration]
| image::step-2-mappings-override-detail-limitations.png[link=step-2-mappings-override-detail-limitations.png, 100%, title=Detailed configuration of attribute override - limitations configuration]
|===

include::../../limitation-all.adoc[]

include::../../see-also.adoc[]
