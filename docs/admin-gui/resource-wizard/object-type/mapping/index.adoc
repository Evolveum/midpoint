= Configure object type mappings
:page-nav-title: Mappings
:page-toc: top
:experimental:
:page-since: "4.8"
:page-description: Configure which data are received from and sent to resources and how to transform them.

Mapping is a mechanism that takes input properties from the source, transforms them, and inserts the result into another property that is then used by a resource.
In other words, mapping enables you to use the data from your source systems, such as HR applications, and adapt them so that you can use them in your target systems, such as an LDAP server.

Refer to xref:/midpoint/reference/expressions/[] for more details on the topic.

[[inbound_mappings]]
[[outbound_mappings]]
== Inbound vs. outbound mappings

There are two complementary kinds of mapping rules, inbound and outbound.

*Inbound mappings* transfer data from xref:/midpoint/reference/schema/focus-and-projections/[projections] (e.g., accounts) on the resource side to xref:/midpoint/reference/schema/focus-and-projections/[focal objects] (e.g., users) on the midPoint side.
They map data in the direction which points _into_ midPoint.
For example, you can use inbound mappings to populate midPoint user attributes with data from your remote application, such as an HR system.

*Outbound mappings* define how to populate the resource-side object attributes with the values from focal object attributes in midPoint.
They map data in the direction which points _out of_ midPoint.

In mapping rules of either direction, you need to define:

* A *name* which should be descriptive and has to be unique across the whole resource.
* A *source* attribute, the value of which serves as the input for the mapping rule.
* A *target* attribute to which the mapping sends its output.
* An *expression* declaring what to do with the input value.
* A *lifecycle state*.

For inbound mappings, the source is an attribute on the remote resource and the target is a focus attribute in midPoint.
Conversely, for outbound mappings, the source is in midPoint and target is on the remote resource.

== Configure mapping rules

To configure mappings in a midPoint resource:

. In icon:database[] *Resources* > icon:database[] *All Resources*, select your resource.
. In icon:male[] *Accounts*, click icon:cog[] btn:[Configure] > icon:retweet[] *Mappings*.

.Configuration menu in resource accounts list as an entry point to the mapping rules wizard
image::mapping-rules-setup-entry-point-via-accounts-configure-menu.webp["Configuration menu in resource accounts list as an entry point to the mapping rules wizard"]

The mapping configuration screen contains two tabs:

* [.nowrap]#icon:arrow-right-to-bracket[] *Inbound mappings (to midPoint)*#
* [.nowrap]#icon:arrow-right-from-bracket[] *Outbound mappings (to resource)*#

.A list of configured inbound mappings
image::step-2-mappings-inbound.png["A screen listing all inbound mappings"]

Select a tab according to which direction you need to configure,
click [.nowrap]#icon:circle-plus[] btn:[Add inbound]# or [.nowrap]#icon:circle-plus[] btn:[Add outbound]#,
and configure the mapping:

* *Name*: Name your mapping descriptively.
    This is convenient during troubleshooting and when using xref:/midpoint/reference/resources/resource-configuration/inheritance/[resource template inheritance].
* *From resource attribute* (inbound mapping): Define a resource attribute that is used as an input for the mapping.
* *Source* (outbound mapping): Define a midPoint focus attribute to be used as an input for the mapping.
* *Expression*: Specify how to handle the source attribute.
    Refer to xref:/midpoint/reference/expressions/expressions/#expression-evaluators[] for more details.
    ** _As is_ (default): Copy values without changes.
    ** _Literal_: Specify one or more constant values upon clicking btn:[Show values].
    ** _Script_: Define a more complex behavior using a script upon clicking btn:[Show script].
    ** _Generate_: Generate a random string abiding the xref:/midpoint/reference/security/credentials/password-policy/[].
        This is typically used for generating passwords.
        Click btn:[Show generate] to select the mode:
        *** _Policy_: Select the policy for the password generation.
        *** _Universal Unique Identifier_: Generate a unique identifier (UUID).
    ** _Path_: Reference a property or a variable upon clicking btn:[Show path].
* *Target* (inbound mapping): Select a midPoint property in which to to store the mapping output.
* *To resource attribute* (outbound mapping): Select a resource property in which to to store the mapping output.
* *Lifecycle state*: Select the xref:/midpoint/reference/concepts/object-lifecycle/[lifecycle state] of the mapping.

Click icon:check[] btn:[Save mappings] to save your configuration.

[TIP]
====
Use the buttons at the far right of the mapping list rows to delete, rename, or duplicate rules, and to access xref:/midpoint/reference/admin-gui/resource-wizard/object-type/mapping/advanced-mappings/[advanced mapping configuration].
====

[[attribute_override]]
== Attribute overrides

Attribute configuration can be overridden beyond the context of the mappings to give you more maneuvering space, for example to override the default connector behavior.
Attribute override apply to any use of the overridden attributes;
you cannot override an attribute only for outbound mappings, for instance.

Refer to xref:/midpoint/reference/resources/resource-configuration/schema-handling/attributes/[] and the nested articles for details.

To configure attribute overrides:

. In icon:database[] *Resources* > icon:database[] *All Resources*, select your resource.
. In icon:male[] *Accounts*, click icon:cog[] btn:[Configure] > icon:retweet[] *Mappings*.
. Click [.nowrap]#icon:shuffle[] btn:[Attribute overrides]#
. To add a new override, click [.nowrap]#icon:circle-plus[] btn:[Add override]#.

[NOTE]
====
By default, all attributes that are or have been used in a mapping are listed on the attribute override screen.
====

.List of configured attribute overrides
image::step-2-mappings-override.png["Screen listing configured attribute overrides"]

These are the options you can configure for an attribute override:

* *Ref*: Select the attribute to override.
* *Display name*: Specify the display name of the attribute.
* *Description*: Define the description of the attribute.
* *Mandatory field*: Specify if the attribute is mandatory (_True_) or not (_False_).
* *Multi-value*: Define if the attribute can contain multiple values (_True_) or only a single value (_False_).
* *Tolerant*: Define whether values of foreign origin are tolerated.
    ** When an attribute is tolerant, midPoint will _tolerate_ values it has not provisioned itself, e.g., those set directly on the resource.
    ** When an attribute is not tolerant, midPoint will proactively remove during a reconciliation any value that that does not originate from midPoint.
* *Lifecycle state*: Define the xref:/midpoint/reference/concepts/object-lifecycle/[lifecycle state] of the attribute.

Click icon:check[] btn:[Save overrides] to save your changes.

[TIP]
====
Use the buttons at the far right of the attribute override list rows to delete or duplicate overrides, and to access xref:/midpoint/reference/admin-gui/resource-wizard/object-type/mapping/advanced-mappings/#advanced_attribute_override[advanced attribute override configuration].
====

include::../../limitation-all.adoc[]

include::../../see-also.adoc[]
