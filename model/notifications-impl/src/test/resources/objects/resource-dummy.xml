<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ Copyright (c) 2010-2018 Evolveum and contributors
  ~
  ~ This work is dual-licensed under the Apache License 2.0
  ~ and European Union Public License. See LICENSE file for details.
  -->

<resource oid="ef2bc95b-76e0-59e2-86d6-9999dddddddd"
        xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
        xmlns:q="http://prism.evolveum.com/xml/ns/public/query-3"
        xmlns:icfs="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/resource-schema-3"
        xmlns:mr="http://prism.evolveum.com/xml/ns/public/matching-rule-3"
        xmlns:ri="http://midpoint.evolveum.com/xml/ns/public/resource/instance-3"
        xmlns:cap="http://midpoint.evolveum.com/xml/ns/public/resource/capabilities-3"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

    <name>HR System</name>
    <connectorRef oid="will-be-supplied-by-the-test-code"/>
    <connectorConfiguration xmlns:icfi="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/bundle/com.evolveum.icf.dummy/com.evolveum.icf.dummy.connector.DummyConnector"
                   xmlns:icfc="http://midpoint.evolveum.com/xml/ns/public/connector/icf-1/connector-schema-3">

        <icfc:configurationProperties>
            <icfi:instanceId/> <!-- Default instance -->
            <icfi:supportValidity>true</icfi:supportValidity>
        </icfc:configurationProperties>

        <icfc:resultsHandlerConfiguration>
            <icfc:enableNormalizingResultsHandler>false</icfc:enableNormalizingResultsHandler>
            <icfc:enableFilteredResultsHandler>false</icfc:enableFilteredResultsHandler>
            <icfc:enableAttributesToGetSearchResultsHandler>false</icfc:enableAttributesToGetSearchResultsHandler>
        </icfc:resultsHandlerConfiguration>

    </connectorConfiguration>
    <!-- No schema. It should be generated by provisioning on the first use of this resource. -->
    <schemaHandling>
        <objectType id="5">
            <kind>account</kind>
            <intent>HR Account</intent>
            <displayName>HR Account</displayName>
            <delineation>
                <objectClass>ri:AccountObjectClass</objectClass>
            </delineation>
            <focus>
                <type>UserType</type>
            </focus>
            <attribute>
                <ref>icfs:name</ref>
                <outbound>
                    <name>name to __NAME__</name>
                    <strength>strong</strength>
                    <source>
                        <path>name</path>
                    </source>
                </outbound>
                <inbound id="7">
                    <name>__NAME__ to name</name>
                    <strength>strong</strength>
                    <target>
                        <path>name</path>
                    </target>
                </inbound>
            </attribute>
            <attribute id="6">
                <ref>ri:internalId</ref>
                <outbound>
                    <name>personal number to id</name>
                    <strength>strong</strength>
                    <source>
                        <path>personalNumber</path>
                    </source>
                </outbound>
                <inbound id="7">
                    <name>id_to_emp_number</name>
                    <strength>strong</strength>
                    <target>
                        <path>personalNumber</path>
                    </target>
                </inbound>
            </attribute>
            <attribute id="8">
                <ref>ri:fullname</ref>
                <outbound>
                    <name>name to fullname</name>
                    <strength>strong</strength>
                    <source>
                        <path>fullName</path>
                    </source>
                </outbound>
                <inbound id="9">
                    <name>fullname_to_name</name>
                    <strength>strong</strength>
                    <target>
                        <path>fullName</path>
                    </target>
                </inbound>
            </attribute>
            <attribute id="10">
                <ref>ri:description</ref>
                <outbound>
                    <name>Description to description</name>
                    <strength>strong</strength>
                    <source>
                        <path>description</path>
                    </source>
                </outbound>
                <inbound id="11">
                    <name>Description to description</name>
                    <strength>strong</strength>
                    <target>
                        <path>description</path>
                    </target>
                </inbound>
            </attribute>
        </objectType>
<!--        <objectType id="45">-->
<!--            <kind>entitlement</kind>-->
<!--            <displayName>Group</displayName>-->
<!--            <delineation>-->
<!--                <objectClass>ri:CustomGroupObjectClass</objectClass>-->
<!--            </delineation>-->
<!--            <focus>-->
<!--                <type>RoleType</type>-->
<!--            </focus>-->
<!--        </objectType>-->
<!--        <associationType id="46">-->
<!--            <name>group_member</name>-->
<!--            <displayName>Group Member</displayName>-->
<!--            <subject>-->
<!--                <objectType id="51">-->
<!--                    <kind>account</kind>-->
<!--                    <intent>HR Account</intent>-->
<!--                </objectType>-->
<!--                <association>-->
<!--                    <ref>group</ref>-->
<!--                    <sourceAttributeRef>group</sourceAttributeRef>-->
<!--                    <inbound id="52">-->
<!--                        <name>Group_member</name>-->
<!--                        <strength>strong</strength>-->
<!--                        <expression>-->
<!--                            <associationSynchronization xsi:type="AssociationSynchronizationExpressionEvaluatorType">-->
<!--                                <objectRef id="53">-->
<!--                                    <ref>group</ref>-->
<!--                                    <correlator/>-->
<!--                                    <mapping id="54">-->
<!--                                        <name>GroupMember</name>-->
<!--                                        <expression>-->
<!--                                            <shadowOwnerReferenceSearch/>-->
<!--                                        </expression>-->
<!--                                        <target>-->
<!--                                            <path>targetRef</path>-->
<!--                                        </target>-->
<!--                                    </mapping>-->
<!--                                </objectRef>-->
<!--                                <synchronization>-->
<!--                                    <reaction id="55">-->
<!--                                        <situation>unmatched</situation>-->
<!--                                        <actions>-->
<!--                                            <addFocusValue id="56"/>-->
<!--                                        </actions>-->
<!--                                    </reaction>-->
<!--                                    <reaction id="57">-->
<!--                                        <situation>matched</situation>-->
<!--                                        <actions>-->
<!--                                            <synchronize id="58"/>-->
<!--                                        </actions>-->
<!--                                    </reaction>-->
<!--                                </synchronization>-->
<!--                            </associationSynchronization>-->
<!--                        </expression>-->
<!--                    </inbound>-->
<!--                </association>-->
<!--            </subject>-->
<!--            <object id="48">-->
<!--                <objectType id="49">-->
<!--                    <kind>entitlement</kind>-->
<!--                    <intent>default</intent>-->
<!--                </objectType>-->
<!--            </object>-->
<!--        </associationType>-->
    </schemaHandling>
    <capabilities>
        <configured xmlns:cap="http://midpoint.evolveum.com/xml/ns/public/resource/capabilities-3">
<!--            <cap:references>-->
<!--                <cap:type id="34">-->
<!--                    <cap:name>CsvGroupReferenceType</cap:name>-->
<!--                    <cap:subject>-->
<!--                        <cap:delineation id="35">-->
<!--                            <cap:objectClass>ri:AccountObjectClass</cap:objectClass>-->
<!--                            <cap:baseContext>-->
<!--                                <objectClass>ri:AccountObjectClass</objectClass>-->
<!--                            </cap:baseContext>-->
<!--                        </cap:delineation>-->
<!--                        <cap:primaryBindingAttributeRef>groups</cap:primaryBindingAttributeRef>-->
<!--                        <cap:localItemName>group</cap:localItemName>-->
<!--                    </cap:subject>-->
<!--                    <cap:object>-->
<!--                        <cap:delineation id="36">-->
<!--                            <cap:objectClass>ri:CustomGroupObjectClass</cap:objectClass>-->
<!--                            <cap:baseContext>-->
<!--                                <objectClass>ri:CustomGroupObjectClass</objectClass>-->
<!--                            </cap:baseContext>-->
<!--                        </cap:delineation>-->
<!--                        <cap:primaryBindingAttributeRef>group</cap:primaryBindingAttributeRef>-->
<!--                    </cap:object>-->
<!--                    <cap:direction>subjectToObject</cap:direction>-->
<!--                </cap:type>-->
<!--            </cap:references>-->
            <cap:auxiliaryObjectClasses>
                <cap:enabled>true</cap:enabled>
            </cap:auxiliaryObjectClasses>
        </configured>
    </capabilities>
</resource>
