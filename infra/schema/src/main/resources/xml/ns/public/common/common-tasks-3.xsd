<?xml version="1.0" encoding="UTF-8"?>

<!--
  ~ Copyright (c) 2010-2017 Evolveum and contributors
  ~
  ~ This work is dual-licensed under the Apache License 2.0
  ~ and European Union Public License. See LICENSE file for details.
  -->
<xsd:schema targetNamespace="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
        xmlns:tns="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
        xmlns:xsd="http://www.w3.org/2001/XMLSchema"
        xmlns:a="http://prism.evolveum.com/xml/ns/public/annotation-3"
        xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
        xmlns:t="http://prism.evolveum.com/xml/ns/public/types-3"
        xmlns:q="http://prism.evolveum.com/xml/ns/public/query-3"
        xmlns:s="http://midpoint.evolveum.com/xml/ns/public/model/scripting-3"
        xmlns:jaxb="http://java.sun.com/xml/ns/jaxb"
        elementFormDefault="qualified"
        xmlns:xjc="http://java.sun.com/xml/ns/jaxb/xjc"
        jaxb:extensionBindingPrefixes="xjc"
        jaxb:version="2.0">

    <xsd:annotation>
        <xsd:documentation>
            Part of common-3 schema that deals with tasks and nodes.
        </xsd:documentation>
    </xsd:annotation>

    <!-- Don't provide schemaLocation here, as it causes xjc to really contact the URIs (!) -->
    <xsd:import namespace="http://prism.evolveum.com/xml/ns/public/annotation-3"/>
    <xsd:import namespace="http://prism.evolveum.com/xml/ns/public/types-3"/>
    <xsd:import namespace="http://prism.evolveum.com/xml/ns/public/query-3"/>
    <xsd:import namespace="http://midpoint.evolveum.com/xml/ns/public/model/scripting-3"/>
    <xsd:import namespace="http://midpoint.evolveum.com/xml/ns/public/model/scripting/extension-3"/>

    <xsd:include schemaLocation="http://midpoint.evolveum.com/xml/ns/public/common/common-core-3" />
    <xsd:include schemaLocation="http://midpoint.evolveum.com/xml/ns/public/common/common-case-management-3" />
    <xsd:include schemaLocation="http://midpoint.evolveum.com/xml/ns/public/common/common-model-context-3" />

    <xsd:complexType name="TaskType">
        <xsd:annotation>
            <xsd:documentation>
                TaskType contains information about a task (either transient or persistent).
                For background information and clarification of various terms used here, please see
                <a href="https://wiki.evolveum.com/display/midPoint/Task+Manager">wiki:Task Manager</a>
                and
                <a href="https://docs.evolveum.com/midpoint/architecture/concepts/task/">Task</a>.
            </xsd:documentation>
            <xsd:appinfo>
                <a:schemaMigration>
                    <a:element>tns:canRunOnNode</a:element>
                    <a:version>4.0</a:version>
                    <a:operation>removed</a:operation>
                </a:schemaMigration>
                <a:schemaMigration>
                    <a:element>tns:otherHandlersUriStack</a:element>
                    <a:version>4.4</a:version>
                    <a:operation>removed</a:operation>
                </a:schemaMigration>
                <a:schemaMigration>
                    <a:element>tns:structuredProgress</a:element>
                    <a:version>4.4</a:version>
                    <a:operation>removed</a:operation>
                </a:schemaMigration>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:AssignmentHolderType">
                <xsd:sequence>
                    <xsd:element name="taskIdentifier" type="xsd:string" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                <p>
                                    Task (lightweight) identifier. This is an unique identification of any task,
                                    regardless whether it is persistent or transient (cf. OID). Therefore this can be used
                                    to identify all tasks, e.g. for the purposes of auditing and logging.
                                </p>
                                <p>
                                    Task identifier is assigned automatically when the task is created. It is immutable.
                                    It is formally set as optional, however it is mandatory for any task to work. Setting
                                    it to optional allows creating a task without identifier and generating the identifier
                                    during import. However any tasks that live inside midPoint (running or stored in repository)
                                    must have valid task identifier.
                                </p>
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="ownerRef" type="tns:ObjectReferenceType" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                The user that owns this task. It usually means the user that started the task
                                or a system user that is used to execute the task. The owner will be used to
                                determine access rights of the task, will be used for auditing, etc. If owner
                                isn't set, currently logged in user is used.
                            </xsd:documentation>
                            <xsd:appinfo>
                                <a:objectReferenceTargetType>tns:UserType</a:objectReferenceTargetType>
                            </xsd:appinfo>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="channel" type="xsd:anyURI" minOccurs="0" />
                    <xsd:element name="parent" type="xsd:string" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                <p>
                                    Parent task. This property is used to implement task hierarchies. A task can have
                                    a number of children (subtasks) that carry out some of the work. A typical example
                                    is when multi-node tasks are used: There is a parent task representing the whole operation
                                    (e.g. import from resource), and its children - worker tasks - that acquire buckets
                                    of work and carrying them out. The parent waits for the children to finish and then
                                    finishes itself.
                                </p>
                                <p>
                                    If this property is null, this task is a "root-level" task that has no parent.
                                </p>
                                <p>
                                    Note that the task identifier (not OID) is used here.
                                </p>
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="subtaskRef" type="c:ObjectReferenceType" minOccurs="0" maxOccurs="unbounded">
                        <xsd:annotation>
                            <xsd:documentation>
                                Set of task's subtasks references.
                                TRANSIENT attribute. In the repository the parent-child relationship is stored using "parent" property.
                            </xsd:documentation>
                            <xsd:appinfo>
                                <a:objectReferenceTargetType>tns:TaskType</a:objectReferenceTargetType>
                            </xsd:appinfo>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="dependent" type="xsd:string" minOccurs="0" maxOccurs="unbounded">
                        <xsd:annotation>
                            <xsd:documentation>
                                Dependent tasks, i.e. tasks that wait for the completion of this task.
                                Task identifiers (not OIDs) are used here.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="dependentTaskRef" type="c:ObjectReferenceType" minOccurs="0" maxOccurs="unbounded">
                        <xsd:annotation>
                            <xsd:documentation>
                                Dependent tasks references, i.e. tasks that wait for the completion of this task.
                                TRANSIENT attribute. In the repository only the identifiers are stored (see "dependent" attribute).
                            </xsd:documentation>
                            <xsd:appinfo>
                                <a:objectReferenceTargetType>tns:TaskType</a:objectReferenceTargetType>
                            </xsd:appinfo>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="executionStatus" type="tns:TaskExecutionStateType" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                Execution status provides information about the task overall high-level execution state.
                                It tells whether the task is running/runnable, waits for something or is done.
                                This state is to be displayed to the user.

                                TODO rename to executionState
                            </xsd:documentation>
                            <xsd:appinfo>
                                <a:displayName>TaskType.executionStatus</a:displayName>
                            </xsd:appinfo>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="schedulingState" type="tns:TaskSchedulingStateType" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                Scheduling state informs about the state of the task regarding its scheduling.
                                It is generally the same as execution state, but can differ from it e.g. when
                                task trees are involved: When a task tree is executing, the root task is technically
                                waiting for the children (so scheduling state is WAITING) but from the high level point
                                of view it is executing (so execution state is RUNNING).
                            </xsd:documentation>
                            <xsd:appinfo>
                                <a:displayName>TaskType.schedulingState</a:displayName>
                                <a:since>4.3</a:since>
                            </xsd:appinfo>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="waitingReason" type="tns:TaskWaitingReasonType" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                If the task is waiting (i.e. schedulingState = WAITING), what is this task waiting for?
                                Must be null if the task is not waiting for anything.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="unpauseAction" type="tns:TaskUnpauseActionType" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                What to do after task is unpaused (i.e. stopped waiting)?
                                The default for single-run tasks is executeImmediately (mainly for backwards compatibility
                                reasons); the default for recurring tasks is reschedule. It is expected that this item is
                                set by the code that puts the task into waiting state.
                            </xsd:documentation>
                            <xsd:appinfo>
                                <a:since>3.8</a:since>
                            </xsd:appinfo>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="stateBeforeSuspend" type="tns:TaskExecutionStateType" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                What was the task execution state before it was suspended?
                            </xsd:documentation>
                            <xsd:appinfo>
                                <a:since>3.8</a:since>
                            </xsd:appinfo>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="schedulingStateBeforeSuspend" type="tns:TaskSchedulingStateType" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                What was the task scheduling state before it was suspended? It could be either runnable or waiting.
                                This is important because we want to restore the correct state on resume.
                            </xsd:documentation>
                            <xsd:appinfo>
                                <a:since>4.3</a:since>
                            </xsd:appinfo>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="node" type="xsd:string" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                Identifier of the node that currently executes this task.
                                (In case of node crash, the value here may be out-of-date.)
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="nodeAsObserved" type="xsd:string" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                Identifier of the node that executes this task, as observed by querying cluster nodes
                                about tasks that are currently executing.
                                TRANSIENT. This value is not stored in the repository.
                                (It is currently not possible to use it for filtering or sorting.)
                            </xsd:documentation>
                            <xsd:appinfo>
                                <a:displayName>TaskType.nodeAsObserved</a:displayName>
                            </xsd:appinfo>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="category" type="xsd:string" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                Kind of the task, e.g. live sync, reconciliation, workflow, import from resource.
                                Used mainly for the GUI.
                            </xsd:documentation>
                            <xsd:appinfo>
                                <a:displayName>TaskType.category</a:displayName>
                                <a:deprecated>true</a:deprecated>
                            </xsd:appinfo>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="handlerUri" type="xsd:anyURI" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                Handler URI indirectly specifies which class is responsible to handle the task. The
                                handler will
                                execute reaction to a task lifecycle events such as executing the task, task heartbeat,
                                etc.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="result" type="tns:OperationResultType" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                OperationResult that is used to compile task results (parent result).
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="resultStatus" type="tns:OperationResultStatusType" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                Top-level state of the 'result' (OperationResultType).
                                It is put here for ease of use - mainly filtering, displaying, and so on.
                            </xsd:documentation>
                            <xsd:appinfo>
                                <a:displayName>TaskType.resultStatus</a:displayName>
                            </xsd:appinfo>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="objectRef" type="tns:ObjectReferenceType" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                Object that the task is associated with. Tasks may be associated with a particular
                                objects. For
                                example a "import from resource" task is associated with the resource definition object
                                that it imports from. Similarly
                                for synchronization and reconciliation tasks (cycles).
                            </xsd:documentation>
                            <xsd:appinfo>
                                <a:displayName>TaskType.objectRef</a:displayName>
                            </xsd:appinfo>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="lastRunStartTimestamp" type="xsd:dateTime" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                The time when the task execution was last started.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="lastRunFinishTimestamp" type="xsd:dateTime" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                The time when the (last) task execution was finished, successfully or unsuccessfully.
                                (If node crashes, this attribute is not updated.)
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="completionTimestamp" type="xsd:dateTime" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                The moment when the task was marked as closed. (May be different from
                                lastRunFinishTimestamp, e.g. when task waits for its children to finish
                                and then closes automatically.)
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="cleanupAfterCompletion" type="xsd:duration" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                If set, the task is automatically cleaned up after this time following its completion.
                            </xsd:documentation>
                            <xsd:appinfo>
                                <a:since>3.7</a:since>
                            </xsd:appinfo>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="nextRunStartTimestamp" type="xsd:dateTime" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                The time when the task should start again, according to the task's defined schedule.
                                (Null if no further execution is scheduled.)
                                Ad-hoc (retry) run times, like those stemming from unsatisfied execution constraints, are NOT
                                considered here. They are covered by nextRetryTimestamp property.

                                TRANSIENT. This value is not stored in the repo, it is queried dynamically.
                                (It is currently not possible to use it for filtering or sorting.)
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="nextRetryTimestamp" type="xsd:dateTime" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                If the start of a task was delayed (typically because of unsatisfied execution constraints),
                                the planned retry time is reported here.

                                EXPERIMENTAL.

                                TRANSIENT. This value is not stored in the repo, it is queried dynamically.
                                (It is currently not possible to use it for filtering or sorting.)
                            </xsd:documentation>
                            <xsd:appinfo>
                                <a:since>3.5</a:since>
                            </xsd:appinfo>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="progress" type="xsd:long" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                Relative metric of task progress. The meaning of this attribute
                                is specific to particular task handler.
                            </xsd:documentation>
                            <xsd:appinfo>
                                <a:displayName>TaskType.progress</a:displayName>
                            </xsd:appinfo>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="operationStats" type="tns:OperationStatsType" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                Operation statistics/state.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <!--<xsd:element name="workManagement" type="tns:WorkDistributionType" minOccurs="0">-->
                    <!--    <xsd:annotation>-->
                    <!--        <xsd:documentation>-->
                    <!--            Configuration of how the work should be managed: segmented into buckets and processed by workers.-->
                    <!--        </xsd:documentation>-->
                    <!--    </xsd:annotation>-->
                    <!--</xsd:element>-->
                    <xsd:element name="stalledSince" type="xsd:dateTime" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                From which moment is this task stalled (if applicable)?
                                TRANSIENT. This value is not stored in the repo, it is queried dynamically.
                                (It is currently not possible to use it for filtering or sorting.)
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="expectedTotal" type="xsd:long" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                Expected target (goal) value of task progress. Perceived progress
                                is computed as a ratio of progress/expectedTotal. May be null; in that
                                case we just do not know how much progress we should expect.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="recurrence" type="tns:TaskRecurrenceType" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                Whether the task activity is to be executed only once (single-run tasks)
                                or periodically (recurring tasks). If nothing set explicitly, single-run
                                task is created.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="binding" type="tns:TaskBindingType" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                Whether a recurring task is bound tightly to one node (having allocated
                                a thread on this node for the whole time of task execution) or it should
                                by dynamically placed on any suitable node when its execution time comes.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="executionConstraints" type="tns:TaskExecutionConstraintsType" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                <p>
                                    Constraints on task execution, e.g. a execution group, allowed/disallowed nodes, etc.
                                    EXPERIMENTAL
                                </p>
                            </xsd:documentation>
                            <xsd:appinfo>
                                <a:since>3.5</a:since>
                            </xsd:appinfo>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="executionEnvironment" type="tns:TaskExecutionEnvironmentType" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                Specification of the environment in which the task should execute.
                                An example is caching profile that should be used.
                            </xsd:documentation>
                            <xsd:appinfo>
                                <a:experimental>true</a:experimental>
                                <a:since>4.0</a:since>
                            </xsd:appinfo>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="schedule" type="tns:ScheduleType" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                Task schedule. Specifies when and how often to execute the task.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="threadStopAction" type="tns:ThreadStopActionType" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                What is to be done when the thread allocated to this task stops
                                (e.g. via node shutdown or node crash).
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="modelOperationContext" type="tns:LensContextType" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                Model context of the operation that is to be executed within this task.
                                This is NOT a live information: it is a serialized form of a model context.
                                Currently there is a specialized task handler that takes this context,
                                unmarshalls and executes it.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="policyRule" type="tns:PolicyRuleType" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                Policy rule for the task. E.g notify user 5 days before their account expires.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="errorHandlingStrategy" type="tns:TaskErrorHandlingStrategyType" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                Error handling strategy for this task. EXPERIMENTAL.
                            </xsd:documentation>
                            <xsd:appinfo>
                                <a:experimental>true</a:experimental>
                                <a:since>4.3</a:since>
                            </xsd:appinfo>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="preActivity" type="tns:ActivityDefinitionType" minOccurs="0" maxOccurs="unbounded">
                        <xsd:annotation>
                            <xsd:documentation>
                                Definition of an activity or activities that should be executed before the main task activity.
                            </xsd:documentation>
                            <xsd:appinfo>
                                <a:since>4.4</a:since>
                                <a:experimental>true</a:experimental>
                            </xsd:appinfo>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="activity" type="tns:ActivityDefinitionType" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                Definition of the main activity that should be executed within this task.
                            </xsd:documentation>
                            <xsd:appinfo>
                                <a:since>4.4</a:since>
                                <a:experimental>true</a:experimental>
                            </xsd:appinfo>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="postActivity" type="tns:ActivityDefinitionType" minOccurs="0" maxOccurs="unbounded">
                        <xsd:annotation>
                            <xsd:documentation>
                                Definition of an activity or activities that should be executed after the main task activity.
                            </xsd:documentation>
                            <xsd:appinfo>
                                <a:since>4.4</a:since>
                                <a:experimental>true</a:experimental>
                            </xsd:appinfo>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="activityState" type="tns:TaskActivityStateType" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                State of the work the task is supposed to do (or has done). This information is used e.g. to
                                distribute the work or to provide stateful suspend+resume feature. The information here is
                                managed by the system (by task manager and task handler).
                            </xsd:documentation>
                            <xsd:appinfo>
                                <a:since>3.8</a:since>
                            </xsd:appinfo>
                        </xsd:annotation>
                    </xsd:element>
                </xsd:sequence>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>
    <xsd:element name="task" type="tns:TaskType" substitutionGroup="c:object"/>

    <xsd:complexType name="TaskExecutionEnvironmentType">
        <xsd:annotation>
            <xsd:documentation>
                Specification of the environment in which the task should execute.
                An example is caching profile that should be used.
                EXPERIMENTAL.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.0</a:since>
                <a:experimental>true</a:experimental>
                <a:container>true</a:container>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="cachingProfile" type="xsd:string" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        Caching profile(s) that are to be applied to this task.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="operationResultHandlingStrategy" type="xsd:string" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Operation result handling strategy that is to be applied to this task.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>

    <xsd:complexType name="TaskExecutionConstraintsType">
        <xsd:annotation>
            <xsd:documentation>
                Constraints on task execution, e.g. a execution group, allowed/disallowed nodes, etc.

                EXPERIMENTAL.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>3.5</a:since>
                <a:container>true</a:container>
                <a:schemaMigration>
                    <a:element>tns:allowedNode</a:element>
                    <a:version>4.0</a:version>
                    <a:operation>removed</a:operation>
                </a:schemaMigration>
                <a:schemaMigration>
                    <a:element>tns:disallowedNode</a:element>
                    <a:version>4.0</a:version>
                    <a:operation>removed</a:operation>
                </a:schemaMigration>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="group" type="xsd:string" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        A group this task is a part of. In the future, task execution groups will probably have more
                        complex parameters. But for now, their only parameter is the (cluster-wide) member tasks limit.
                        They are also referenced from NodeType when specifying execution limitations for them.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <a:displayName>TaskExecutionConstraintsType.group</a:displayName>
                        <a:displayOrder>100</a:displayOrder>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="groupTaskLimit" type="xsd:int" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Number of tasks within the group that can be executed at once (cluster-wide). Default is "unlimited".
                        This parameter will be moved into separate task group object in a later version of midPoint.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <a:displayName>TaskExecutionConstraintsType.groupTaskLimit</a:displayName>
                        <a:displayOrder>110</a:displayOrder>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="secondaryGroup" type="tns:TaskExecutionGroupConstraintType" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        TODO
                    </xsd:documentation>
                    <xsd:appinfo>
                        <a:displayName>TaskExecutionConstraintsType.secondaryGroup</a:displayName>
                        <a:displayOrder>120</a:displayOrder>
                        <a:since>3.7.1</a:since>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="retryAfter" type="xsd:duration" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        In what time to retry after cluster-wide execution constraints are not met. The default is 1 minute.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <a:displayName>TaskExecutionConstraintsType.retryAfter</a:displayName>
                        <a:displayOrder>130</a:displayOrder>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>

    <xsd:complexType name="TaskExecutionGroupConstraintType">  <!-- TODO type name -->
        <xsd:annotation>
            <xsd:documentation>
                TODO
                EXPERIMENTAL.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>3.7</a:since>
                <a:container>true</a:container>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="group" type="xsd:string">
                <xsd:annotation>
                    <xsd:documentation>
                        TODO
                    </xsd:documentation>
                    <xsd:appinfo>
                        <a:displayName>TaskExecutionGroupConstraintType.group</a:displayName>
                        <a:displayOrder>100</a:displayOrder>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="groupTaskLimit" type="xsd:int" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Number of tasks within the group that can be executed at once (cluster-wide). Default is "unlimited".
                        This parameter will be moved into separate task group object in a later version of midPoint.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <a:displayName>TaskExecutionGroupConstraintType.groupTaskLimit</a:displayName>
                        <a:displayOrder>110</a:displayOrder>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>

    <xsd:complexType name="StructuredTaskProgressType">
        <xsd:annotation>
            <xsd:documentation>
                DELETE ASAP
            </xsd:documentation>
            <xsd:appinfo>
                <a:container>true</a:container>
                <a:experimentaL>true</a:experimentaL>
                <a:since>4.3</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="currentPartUri" type="xsd:anyURI" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Current part URI.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="currentPartNumber" type="xsd:int" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Current part number, starting at 1. The numbering is relative to the parts processed by given physical task.
                        An example: for simple reconciliation tasks there are parts 1, 2, and 3. For partitioned reconciliation
                        task, i.e. such task that individual parts run in separate physical tasks, each task structured progress
                        has only a single part, numbered 1.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="expectedParts" type="xsd:int" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        How many parts are in this physical task?
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="part" type="tns:TaskPartProgressOldType" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        Progress in individual parts.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>
    <xsd:element name="structuredTaskProgress" type="tns:StructuredTaskProgressType" />

    <xsd:complexType name="TaskPartProgressOldType">
        <xsd:annotation>
            <xsd:documentation>
                Progress of a given task part.
            </xsd:documentation>
            <xsd:appinfo>
                <a:container>true</a:container>
                <a:experimentaL>true</a:experimentaL>
                <a:since>4.3</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="partUri" type="xsd:anyURI" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        URI of the task part.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="closed" type="tns:OutcomeKeyedCounterType" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        Counters representing items that were processed and are stored in closed buckets.
                        These items will not be re-processed if the task would start over.
                        TODO better name
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="open" type="tns:OutcomeKeyedCounterType" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        Counters representing items that were processed but their bucket is not closed yet.
                        In the case of task restart, these will be re-processed.
                        TODO better name
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="complete" type="xsd:boolean" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        True if this part is complete.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>

    <xsd:complexType name="ActivityProgressType">
        <xsd:annotation>
            <xsd:documentation>
                Progress of an activity.
            </xsd:documentation>
            <xsd:appinfo>
                <a:container>true</a:container>
                <a:experimentaL>true</a:experimentaL>
                <a:since>4.3</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="committed" type="tns:OutcomeKeyedCounterType" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        Counters representing items that were processed and will not be processed again even if the activity
                        is re-run, e.g. because they are stored in completed buckets. (Or because the live sync token was
                        updated.)
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="uncommitted" type="tns:OutcomeKeyedCounterType" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        Counters representing items that were processed but they may be processed again if the activity is
                        re-run, e.g. their bucket is not completed yet. (Or because the live sync token was not yet updated.)
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>
    <xsd:element name="activityProgress" type="tns:ActivityProgressType" />

    <!-- If needed, please create subtypes of this for particular uses. -->
    <xsd:complexType name="OutcomeKeyedCounterType">
        <xsd:annotation>
            <xsd:documentation>
                Counter keyed by a qualified outcome. Used e.g. for structured progress or synchronization situation transitions.
            </xsd:documentation>
            <xsd:appinfo>
                <a:container>true</a:container>
                <a:experimentaL>true</a:experimentaL>
                <a:since>4.3</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="outcome" type="tns:QualifiedItemProcessingOutcomeType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Outcome of the processing (success, failure, skip) + optional qualification.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="count" type="xsd:int" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Count of items/situations/whatever for given qualified outcome.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>
    <xsd:element name="outcomeKeyedCounter" type="tns:OutcomeKeyedCounterType" />

    <xsd:complexType name="OperationStatsType">
        <xsd:annotation>
            <xsd:documentation>
                Operation execution statistics/state. Contains various statistical and state information about execution
                of the operation or operations that are carried out in the scope of the task.

                Not all parts of this structure are relevant for all task types. TODO handle this by subtyping - later.

                EXPERIMENTAL.
            </xsd:documentation>
            <xsd:appinfo>
                <a:container>true</a:container>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="environmentalPerformanceInformation" type="tns:EnvironmentalPerformanceInformationType" minOccurs="0"/>
            <xsd:element name="iterationInformation" type="tns:ActivityItemProcessingStatisticsType" minOccurs="0"/> <!-- TODO remove -->
            <xsd:element name="iterativeTaskInformation" type="tns:IterativeTaskInformationType" minOccurs="0"/> <!-- TODO remove -->
            <xsd:element name="synchronizationInformation" type="tns:ActivitySynchronizationStatisticsType" minOccurs="0"/> <!-- TODO remove -->
            <xsd:element name="actionsExecutedInformation" type="tns:ActivityActionsExecutedType" minOccurs="0"/> <!-- TODO remove -->
            <xsd:element name="repositoryPerformanceInformation" type="tns:RepositoryPerformanceInformationType" minOccurs="0">
                <xsd:annotation>
                    <xsd:appinfo>
                        <a:since>4.0</a:since>
                        <a:experimental>true</a:experimental>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="cachesPerformanceInformation" type="tns:CachesPerformanceInformationType" minOccurs="0">
                <xsd:annotation>
                    <xsd:appinfo>
                        <a:since>4.0</a:since>
                        <a:experimental>true</a:experimental>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="operationsPerformanceInformation" type="tns:OperationsPerformanceInformationType" minOccurs="0">
                <xsd:annotation>
                    <xsd:appinfo>
                        <a:since>4.0</a:since>
                        <a:experimental>true</a:experimental>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="workBucketManagementPerformanceInformation" type="tns:ActivityBucketManagementStatisticsType" minOccurs="0"> <!-- TODO remove -->
                <xsd:annotation>
                    <xsd:appinfo>
                        <a:since>4.0</a:since>
                        <a:experimental>true</a:experimental>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="cachingConfiguration" type="xsd:string" minOccurs="0">
                <xsd:annotation>
                    <xsd:appinfo>
                        <a:since>4.0</a:since>
                        <a:experimental>true</a:experimental>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="timestamp" type="xsd:dateTime" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        When this information was collected from the "living" task.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="liveInformation" type="xsd:boolean" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Source of the information - is it from repository or directly from the "living" task?
                        TRANSIENT INFORMATION, not stored in the repository. Filled in by task manager when fetching the task.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>
    <xsd:element name="operationStats" type="tns:OperationStatsType" />

    <xsd:complexType name="ActivityStatisticsType">
        <xsd:annotation>
            <xsd:documentation>
                Statistical information for individual activities.
            </xsd:documentation>
            <xsd:appinfo>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="identifier" type="xsd:string" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Identifier of the activity to which this information is related.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="itemProcessing" type="tns:ActivityItemProcessingStatisticsType" minOccurs="0"/>
            <xsd:element name="synchronization" type="tns:ActivitySynchronizationStatisticsType" minOccurs="0"/>
            <xsd:element name="actionsExecuted" type="tns:ActivityActionsExecutedType" minOccurs="0"/>
            <xsd:element name="bucketManagement" type="tns:ActivityBucketManagementStatisticsType" minOccurs="0"/>
            <xsd:element name="activity" type="tns:ActivityStatisticsType" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        Statistics for child activities.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>
    <xsd:element name="activityStatistics" type="tns:ActivityStatisticsType" />

    <xsd:complexType name="RepositoryPerformanceInformationType">
        <xsd:annotation>
            <xsd:documentation>
                Information about repository performance.

                EXPERIMENTAL.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.0</a:since>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="operation" type="tns:RepositoryOperationPerformanceInformationType" minOccurs="0" maxOccurs="unbounded"/>
        </xsd:sequence>
    </xsd:complexType>

    <xsd:complexType name="RepositoryOperationPerformanceInformationType">
        <xsd:annotation>
            <xsd:documentation>
                Information about single repository operation kind (e.g. getObject) performance.

                It is strongly related to the internal implementation of the repository, so it may change at any time.

                EXPERIMENTAL.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.0</a:since>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="name" type="xsd:string" />
            <xsd:element name="invocationCount" type="xsd:int" minOccurs="0" />
            <xsd:element name="executionCount" type="xsd:int" minOccurs="0" />
            <xsd:element name="totalTime" type="xsd:long" minOccurs="0" />
            <xsd:element name="minTime" type="xsd:long" minOccurs="0" />
            <xsd:element name="maxTime" type="xsd:long" minOccurs="0" />
            <xsd:element name="totalWastedTime" type="xsd:long" minOccurs="0" />
            <xsd:element name="minWastedTime" type="xsd:long" minOccurs="0" />
            <xsd:element name="maxWastedTime" type="xsd:long" minOccurs="0" />
        </xsd:sequence>
    </xsd:complexType>

    <xsd:complexType name="OperationsPerformanceInformationType">
        <xsd:annotation>
            <xsd:documentation>
                Information about methods performance.

                EXPERIMENTAL.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.0</a:since>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="operation" type="tns:SingleOperationPerformanceInformationType" minOccurs="0" maxOccurs="unbounded"/>
        </xsd:sequence>
    </xsd:complexType>

    <xsd:complexType name="SingleOperationPerformanceInformationType">
        <xsd:annotation>
            <xsd:documentation>
                Information about single method performance.
                EXPERIMENTAL.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.0</a:since>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="name" type="xsd:string" />
            <xsd:element name="invocationCount" type="xsd:int" minOccurs="0" />
            <xsd:element name="totalTime" type="xsd:long" minOccurs="0" />
            <xsd:element name="minTime" type="xsd:long" minOccurs="0" />
            <xsd:element name="maxTime" type="xsd:long" minOccurs="0" />
        </xsd:sequence>
    </xsd:complexType>

    <xsd:complexType name="ActivityBucketManagementStatisticsType">
        <xsd:annotation>
            <xsd:documentation>
                Information about work bucket management operations performance.

                EXPERIMENTAL.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.0</a:since>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="operation" type="tns:WorkBucketManagementOperationPerformanceInformationType" minOccurs="0" maxOccurs="unbounded" />
        </xsd:sequence>
    </xsd:complexType>

    <xsd:complexType name="WorkBucketManagementOperationPerformanceInformationType">
        <xsd:annotation>
            <xsd:documentation>
                Information about specific kind of work bucket management operation performance.

                EXPERIMENTAL.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.0</a:since>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="name" type="xsd:string" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Name of the operation, possibly qualified by the result kind.
                        E.g. completeWorkBucket, getWorkBucket.createdNew, getWorkBucket.noMoreBucketsDefinite,
                        getWorkBucket.InterruptedException.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="count" type="xsd:int" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Number of times this operation (optionally with the specified result) was invoked.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="totalTime" type="xsd:long" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Total time spent in these operations.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="minTime" type="xsd:long" minOccurs="0" />
            <xsd:element name="maxTime" type="xsd:long" minOccurs="0" />
            <xsd:element name="conflictCount" type="xsd:int" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Number of times a conflict occurred. Only write-write conflicts consisting of two tasks trying
                        to overwrite each other's data (detected by precondition violations) are counted here; DBMS-detected
                        transaction aborts are counted in repository-level statistics.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="totalWastedTime" type="xsd:long" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Total time wasted by retrying operations because of write-write conflicts.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="minWastedTime" type="xsd:long" minOccurs="0" />
            <xsd:element name="maxWastedTime" type="xsd:long" minOccurs="0" />
            <xsd:element name="bucketWaitCount" type="xsd:int" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Number of times a wait-state was entered because of no free bucket could be obtained but some buckets
                        are still not done. (This occurs only in scavengers.)
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="bucketsReclaimed" type="xsd:int" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Number of buckets reclaimed from dead (closed or missing) workers. Under normal circumstances
                        this number should be zero.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="totalWaitTime" type="xsd:long" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Total time spent by waiting for buckets to be processed or reclaimed.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="minWaitTime" type="xsd:long" minOccurs="0" />
            <xsd:element name="maxWaitTime" type="xsd:long" minOccurs="0" />
        </xsd:sequence>
    </xsd:complexType>

    <xsd:complexType name="CachesPerformanceInformationType">
        <xsd:annotation>
            <xsd:documentation>
                Information about performance of various caches present in midPoint.

                EXPERIMENTAL.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.0</a:since>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="cache" type="tns:SingleCachePerformanceInformationType" minOccurs="0" maxOccurs="unbounded"/>
        </xsd:sequence>
    </xsd:complexType>

    <xsd:complexType name="SingleCachePerformanceInformationType">
        <xsd:annotation>
            <xsd:documentation>
                Information about performance of a given (single) cache.

                EXPERIMENTAL.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.0</a:since>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="name" type="xsd:string" />
            <xsd:element name="hitCount" type="xsd:int" minOccurs="0" />
            <xsd:element name="weakHitCount" type="xsd:int" minOccurs="0" />
            <xsd:element name="missCount" type="xsd:int" minOccurs="0" />
            <xsd:element name="passCount" type="xsd:int" minOccurs="0" />
            <xsd:element name="notAvailableCount" type="xsd:int" minOccurs="0" />
        </xsd:sequence>
    </xsd:complexType>

    <xsd:simpleType name="TaskExecutionStateType">
        <xsd:annotation>
            <xsd:documentation>
                Execution state provides information about the task overall high-level execution state. It tells
                whether the task is running, runnable, suspended, waits for something or is done.
            </xsd:documentation>
        </xsd:annotation>
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="running">
                <xsd:annotation>
                    <xsd:documentation>
                        The task is running.

                        If this is a child-less task, it means that there is a thread on one of the nodes
                        that executes this task. (An exception is when a node crashes. Then previously running
                        tasks are left in "running" state - until the state is updated by some of the remaining nodes.)

                        For tasks with children, the RUNNING state means that either this task is executing in a thread,
                        or any of its children (transitively) is running. This is to ensure that user sees the task states
                        consistently.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="RUNNING"/>
                        <a:since>4.3</a:since>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="runnable">
                <xsd:annotation>
                    <xsd:documentation>
                        The task is ready to be executed by the scheduler. It just waits either for the defined time to come,
                        or for available thread or node to execute the task.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="RUNNABLE"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="waiting">
                <xsd:annotation>
                    <xsd:documentation>
                        The task is waiting, typically for some other task. Note that this DOES NOT cover parent tasks waiting
                        for their running children. Such parents are in RUNNING state as well. Also, if all children are suspended,
                        then the parent is suspended as well.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="WAITING"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="suspended">
                <xsd:annotation>
                    <xsd:documentation>
                        The task has been suspended. It waits until resumed.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="SUSPENDED"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="closed">
                <xsd:annotation>
                    <xsd:documentation>
                        The task is done. No other changes or progress will happen. The task in this state is considered
                        immutable and the only things that can happen to it is a delete by a cleanup code.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="CLOSED"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
        </xsd:restriction>
    </xsd:simpleType>

    <xsd:simpleType name="TaskSchedulingStateType">
        <xsd:annotation>
            <xsd:documentation>
                Scheduling state informs about the state of the task regarding its scheduling.
                It is generally related to the execution state, but can differ.
            </xsd:documentation>
        </xsd:annotation>
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="ready">
                <xsd:annotation>
                    <xsd:documentation>
                        The task is running or is ready to run. Being ready means that it waits only for the scheduler
                        to start it: e.g. when the scheduled time comes, or when a thread becomes available, and so on.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="READY"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="waiting">
                <xsd:annotation>
                    <xsd:documentation>
                        Something prevents the task from execution. Typically it is dependent on other task(s)
                        so it must wait for their completion before it becomes runnable.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="WAITING"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="suspended">
                <xsd:annotation>
                    <xsd:documentation>
                        The task has been suspended. It waits until resumed (usually by system administrator).
                        After resume it goes to specified state - see stateBeforeSuspend property.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="SUSPENDED"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="closed">
                <xsd:annotation>
                    <xsd:documentation>
                        The task is done. It is not going to be scheduled again. (Unless it is revived
                        by system administrator.)
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="CLOSED"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
        </xsd:restriction>
    </xsd:simpleType>

    <xsd:simpleType name="TaskRecurrenceType">
        <xsd:annotation>
            <xsd:documentation>
                Whether the task activity is to be executed only once (single-run tasks)
                or periodically (recurring tasks).
            </xsd:documentation>
        </xsd:annotation>
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="single">
                <xsd:annotation>
                    <xsd:documentation>
                        The task is executed only once, at the first moment that the schedule
                        specifies. If that moment is in the past, the task will be executed as
                        soon as any execution environment (node) is available.
                        Once the task is finished, it will not be executed again.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="SINGLE"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="recurring">
                <xsd:annotation>
                    <xsd:documentation>
                        The task is executed as many times as the schedule specifies.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="RECURRING"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
        </xsd:restriction>
    </xsd:simpleType>

    <xsd:simpleType name="TaskBindingType">
        <xsd:annotation>
            <xsd:documentation>
                Whether a recurring task is bound tightly to one node (having allocated
                a thread on this node for the whole time of task execution) or it should
                by dynamically placed on any suitable node when its execution time comes.
            </xsd:documentation>
        </xsd:annotation>
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="loose">
                <xsd:annotation>
                    <xsd:documentation>
                        The task is exclusively assigned to a specific node only during its execution.

                        The thread is allocated only for the minimal amount of time.

                        It does not matter which node will execute the task as long as there is an appropriate handler.

                        This is efficient for tasks that take long time to execute and the execution mostly waits
                        (e.g. approvals) or for tasks which have long interval between executions (e.g. reconciliation).
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="LOOSE"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="tight">
                <xsd:annotation>
                    <xsd:documentation>
                        Task is exclusively assigned to a specific node from its start to its finish.

                        A thread will be running and allocated for the task all the time.
                        The thread may go to sleep as needed, but during that time the task remains assigned
                        to the node.

                        This is efficient for recurring tasks executed in short intervals, such as live synchronization.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="TIGHT"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
        </xsd:restriction>
    </xsd:simpleType>

    <xsd:simpleType name="TaskWaitingReasonType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
        </xsd:annotation>
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="otherTasks">
                <xsd:annotation>
                    <xsd:documentation>
                        The task is waiting for other (dependent) tasks - either its subtasks, or tasks explicitly marked
                        as "prerequisites" for this task (via dependentTask property)
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="OTHER_TASKS"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="other">
                <xsd:annotation>
                    <xsd:documentation>
                        The task is waiting because of other reason.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="OTHER"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
        </xsd:restriction>
    </xsd:simpleType>

    <xsd:simpleType name="TaskUnpauseActionType">
        <xsd:annotation>
            <xsd:documentation>
                What to do after task is unpaused (i.e. stopped waiting)?
                EXPERIMENTAL
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>3.8</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="executeImmediately">
                <xsd:annotation>
                    <xsd:documentation>
                        Execute current handler immediately (if there is any). This is the default for single-run tasks.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="EXECUTE_IMMEDIATELY"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="reschedule">
                <xsd:annotation>
                    <xsd:documentation>
                        Execute current handler (if there is any) on next scheduled time. This is the default for recurring tasks.
                        For single-run tasks this means the task is closed, as there is no next scheduled time.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="RESCHEDULE"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="close">
                <xsd:annotation>
                    <xsd:documentation>
                        The task will be closed.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="CLOSE"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
        </xsd:restriction>
    </xsd:simpleType>

    <xsd:simpleType name="ThreadStopActionType">
        <xsd:annotation>
            <xsd:documentation>
                What is to be done when the thread allocated to this task stops
                (e.g. via node shutdown or node crash).
            </xsd:documentation>
        </xsd:annotation>
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="restart">
                <xsd:annotation>
                    <xsd:documentation>
                        The task will be restarted on first node available
                        (i.e. either immediately, if there is a suitable node in the cluster,
                        or later, when a suitable node becomes available).
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="RESTART"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="reschedule">
                <xsd:annotation>
                    <xsd:documentation>
                        The task will be rescheduled according to its schedule
                        (for single-run tasks this is the same as 'restart').
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="RESCHEDULE"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="suspend">
                <xsd:annotation>
                    <xsd:documentation>
                        The task will be suspended.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="SUSPEND"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="close">
                <xsd:annotation>
                    <xsd:documentation>
                        The task will be closed.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="CLOSE"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
        </xsd:restriction>
    </xsd:simpleType>

    <xsd:simpleType name="MisfireActionType">
        <xsd:annotation>
            <xsd:documentation>
                What is to be done when the planned start time arrives without
                the task actually starting.
            </xsd:documentation>
        </xsd:annotation>
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="executeImmediately">
                <xsd:annotation>
                    <xsd:documentation>
                        The task will be executed immediately.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="EXECUTE_IMMEDIATELY"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="reschedule">
                <xsd:annotation>
                    <xsd:documentation>
                        The task will be rescheduled according to its schedule.
                        This is to be used only for loosely-bound recurring tasks.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="RESCHEDULE"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
        </xsd:restriction>
    </xsd:simpleType>

    <xsd:complexType name="ScheduleType">
        <xsd:annotation>
            <xsd:documentation>
                Task schedule. Specifies when and how often something should happen.
            </xsd:documentation>
            <xsd:appinfo>
                <a:container>true</a:container>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="earliestStartTime" type="xsd:dateTime" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Earliest time when the task is allowed to start.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <a:displayOrder>200</a:displayOrder>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="latestStartTime" type="xsd:dateTime" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Latest time when the task is allowed to start.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <a:displayOrder>210</a:displayOrder>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="latestFinishTime" type="xsd:dateTime" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Latest time when the task is allowed to run.
                        It is the responsibility of the task handler to finish
                        working when this time arrives.

                        NOTE: This attribute is currently not used; its use is planned.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <a:displayOrder>220</a:displayOrder>
                        <a:ignore>true</a:ignore>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="interval" type="xsd:int" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Interval in seconds between task runs.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <a:displayOrder>100</a:displayOrder>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="cronLikePattern" type="xsd:string" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Cron-like pattern specifying time(s) when the task is to be run.
                        Currently only loosely-bound recurring tasks can use this feature.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <a:displayOrder>110</a:displayOrder>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="misfireAction" type="tns:MisfireActionType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        What is to be done when the planned start time arrives without
                        the task actually starting.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <a:displayOrder>300</a:displayOrder>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>

    <xsd:complexType name="WorkersManagementType">
        <xsd:annotation>
            <xsd:documentation>
                How to create and manage worker tasks. EXPERIMENTAL.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>3.8</a:since>
                <a:container>true</a:container>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="taskName" type="xsd:string" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        How to derive names for worker tasks. It is possible to use substitution strings of {coordinatorTaskName},
                        {node} and {index} here. CoordinatorTaskName is the name of the coordinator task, node is the node
                        identifier and index numbers workers created for particular node, starting at 1. The default value is
                        "{coordinatorTaskName} ({node}:{index})".
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="otherDeltas" type="t:ItemDeltaType" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        Other deltas to be applied to newly created worker task.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="workersPerNode" type="tns:WorkerTasksPerNodeConfigurationType" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        How many tasks to create?
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>

    <xsd:complexType name="WorkerTasksPerNodeConfigurationType">
        <xsd:annotation>
            <xsd:documentation>
                How to create worker tasks per node. EXPERIMENTAL.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>3.8</a:since>
                <a:container>true</a:container>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="nodeIdentifier" type="xsd:string" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        Node identifier(s) for which we are going to generate the tasks.
                        Empty list means all nodes that are currently defined in the repository.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="count" type="xsd:int" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        How many workers to create for given node(s). Default is 1 per node.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="scavengers" type="xsd:int" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        How many scavengers to appoint for given node(s). Default is 1 per node.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="taskName" type="xsd:string" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        How to derive names for the tasks. This overrides the name setting of parent element.
                        It is possible to use substitution strings of {coordinatorTaskName}, {node} and {index} here.
                        CoordinatorTaskName is the name of the coordinator task, node is the node identifier and index
                        numbers workers created for particular node, starting at 1.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="executionGroup" type="xsd:string" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Execution group for created workers. It is possible to use substitution strings of {node} and {index}
                        here. Node is the node identifier and index numbers workers created for particular node, starting at 1.
                        Default is "{node}".
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="otherDeltas" type="t:ItemDeltaType" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        Other deltas to be applied to newly created worker task in this group.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>

    <xsd:complexType name="ActivityDefinitionType">
        <xsd:annotation>
            <xsd:documentation>
                Describes an activity, i.e. something that has to be carried out within a task.
                It can be either simple (i.e. single action executed on a set of objects) or complex,
                i.e. a sequence of sub-activities.

                Note that in 4.4 midPoint supports only a plain list of activities. This means that a root activity
                can have sub-activities, but none of these can have any.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.4</a:since>
                <a:container>true</a:container>
                <a:experimental>true</a:experimental>
                <a:elaborate>true</a:elaborate>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="order" type="xsd:int" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Relative order of this activity in a list. Relevant for sequential execution of activities
                        (which is the default mode of execution). Activities without order are executed last.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="identifier" type="xsd:string" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Identifier of this activity. If omitted, a reasonable default is generated.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:choice>
                <xsd:element name="work" type="tns:WorkDefinitionsType" minOccurs="0">
                    <xsd:annotation>
                        <xsd:documentation>
                            Describes the work that has to be done within this activity, e.g. recomputation, reconciliation,
                            scripting expression execution, and so on. This contains also the necessary parameters,
                            like resource reference, object class, object query, etc.
                        </xsd:documentation>
                    </xsd:annotation>
                </xsd:element>
                <xsd:element name="composition" type="tns:ActivityCompositionType" minOccurs="0">
                    <xsd:annotation>
                        <xsd:documentation>
                            The current activity cannot be described by simple work specification.
                            It is instead a composition of smaller, completely specified activities.
                        </xsd:documentation>
                    </xsd:annotation>
                </xsd:element>
            </xsd:choice>
            <xsd:element name="tailoring" type="tns:ActivitiesTailoringType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        TODO
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="executionMode" type="tns:ExecutionModeType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Execution mode for this activity: dryRun, simulate, execute, bucketsAnalysis.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="controlFlow" type="tns:ActivityControlFlowSpecificationType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Items like prerequisites, preconditions, error handling strategy, and so on.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="distribution" type="tns:WorkDistributionType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Distribution of the work executed as part of this activity.
                        Directly applicable to simple activities. For complex ones it serves as a default value for the children.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>

    <xsd:complexType name="WorkDefinitionsType">
        <xsd:annotation>
            <xsd:documentation>
                Definition of the work that has to be done within an activity.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.4</a:since>
                <a:container>true</a:container>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:choice>
                <xsd:element name="recomputation" type="tns:RecomputationWorkDefinitionType" minOccurs="0">
                    <xsd:annotation>
                        <xsd:documentation>
                            TODO
                        </xsd:documentation>
                    </xsd:annotation>
                </xsd:element>
                <xsd:element name="import" type="tns:ImportWorkDefinitionType" minOccurs="0">
                    <xsd:annotation>
                        <xsd:documentation>
                            TODO
                        </xsd:documentation>
                    </xsd:annotation>
                </xsd:element>
                <xsd:element name="reconciliation" type="tns:ReconciliationWorkDefinitionType" minOccurs="0">
                    <xsd:annotation>
                        <xsd:documentation>
                            TODO
                        </xsd:documentation>
                    </xsd:annotation>
                </xsd:element>
                <xsd:element name="asynchronousUpdate" type="tns:AsyncUpdateWorkDefinitionType" minOccurs="0">
                    <xsd:annotation>
                        <xsd:documentation>
                            TODO
                        </xsd:documentation>
                    </xsd:annotation>
                </xsd:element>
                <xsd:element name="liveSynchronization" type="tns:LiveSyncWorkDefinitionType" minOccurs="0">
                    <xsd:annotation>
                        <xsd:documentation>
                            TODO
                        </xsd:documentation>
                    </xsd:annotation>
                </xsd:element>
                <xsd:element name="cleanup" type="tns:CleanupWorkDefinitionType" minOccurs="0">
                    <xsd:annotation>
                        <xsd:documentation>
                            TODO
                        </xsd:documentation>
                    </xsd:annotation>
                </xsd:element>
                <xsd:element name="report" type="tns:ReportDefinitionType" minOccurs="0">
                    <xsd:annotation>
                        <xsd:documentation>
                            TODO
                        </xsd:documentation>
                    </xsd:annotation>
                </xsd:element>
                <xsd:element name="iterativeScripting" type="tns:IterativeScriptingWorkDefinitionType" minOccurs="0">
                    <xsd:annotation>
                        <xsd:documentation>
                            TODO
                        </xsd:documentation>
                    </xsd:annotation>
                </xsd:element>
                <xsd:element name="focusValidityScan" type="tns:FocusValidityScanWorkDefinitionType" minOccurs="0">
                    <xsd:annotation>
                        <xsd:documentation>
                            TODO
                        </xsd:documentation>
                    </xsd:annotation>
                </xsd:element>
                <xsd:element name="triggerScan" type="tns:TriggerScanWorkDefinitionType" minOccurs="0">
                    <xsd:annotation>
                        <xsd:documentation>
                            TODO
                        </xsd:documentation>
                    </xsd:annotation>
                </xsd:element>
                <xsd:element name="shadowRefresh" type="tns:ShadowRefreshWorkDefinitionType" minOccurs="0">
                    <xsd:annotation>
                        <xsd:documentation>
                            TODO
                        </xsd:documentation>
                    </xsd:annotation>
                </xsd:element>
                <xsd:element name="changeExecution" type="tns:ChangeExecutionWorkDefinitionType" minOccurs="0">
                    <xsd:annotation>
                        <xsd:documentation>
                            TODO
                        </xsd:documentation>
                    </xsd:annotation>
                </xsd:element>
                <xsd:element name="reindexing" type="tns:ReindexingWorkDefinitionType" minOccurs="0">
                    <xsd:annotation>
                        <xsd:documentation>
                            TODO
                        </xsd:documentation>
                    </xsd:annotation>
                </xsd:element>
                <xsd:element name="shadowCleanup" type="tns:ShadowCleanupWorkDefinitionType" minOccurs="0">
                    <xsd:annotation>
                        <xsd:documentation>
                            TODO
                        </xsd:documentation>
                    </xsd:annotation>
                </xsd:element>
                <xsd:element name="objectIntegrityCheck" type="tns:ObjectIntegrityCheckWorkDefinitionType" minOccurs="0">
                    <xsd:annotation>
                        <xsd:documentation>
                            TODO
                        </xsd:documentation>
                    </xsd:annotation>
                </xsd:element>
                <xsd:element name="shadowIntegrityCheck" type="tns:ShadowIntegrityCheckWorkDefinitionType" minOccurs="0">
                    <xsd:annotation>
                        <xsd:documentation>
                            TODO
                        </xsd:documentation>
                    </xsd:annotation>
                </xsd:element>
            </xsd:choice>
            <xsd:element name="extension" type="tns:ExtensionType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        TODO
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>

    <xsd:complexType name="ActivitiesTailoringType">
        <xsd:annotation>
            <xsd:documentation>
                Tailors the work specification by adding activity or activities before or after existing ones,
                or by changing specification (execution mode, flow of control, distribution) of existing activities.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.4</a:since>
                <a:container>true</a:container>
                <a:experimental>true</a:experimental>
                <a:elaborate>true</a:elaborate> <!-- maybe -->
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="insertBefore" type="tns:ActivityBeforeType" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        TODO
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="insertAfter" type="tns:ActivityAfterType" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        TODO
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="change" type="tns:ActivityTailoringType" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        TODO
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>

    <xsd:complexType name="ActivityBeforeAfterType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.4</a:since>
                <a:container>true</a:container>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="reference" type="xsd:string" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Identifier of existing activity before/after which the current one has to be inserted.
                        Null means the first or the last one, respectively.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="activity" type="tns:ActivityDefinitionType" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        Activity or activities that are to be inserted.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>

    <xsd:complexType name="ActivityBeforeType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.4</a:since>
                <a:container>true</a:container>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:ActivityBeforeAfterType" />
        </xsd:complexContent>
    </xsd:complexType>

    <xsd:complexType name="ActivityAfterType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.4</a:since>
                <a:container>true</a:container>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:ActivityBeforeAfterType" />
        </xsd:complexContent>
    </xsd:complexType>

    <xsd:complexType name="ActivityTailoringType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.4</a:since>
                <a:container>true</a:container>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="reference" type="xsd:string" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        Identifier of existing activity or activities that are to be tailored.
                        No value means all activities.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="executionMode" type="tns:ExecutionModeType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Execution mode for this activity: dryRun, simulate, execute, bucketsAnalysis.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="controlFlow" type="tns:ActivityControlFlowSpecificationTailoringType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Items like prerequisites, preconditions, error handling strategy, and so on.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="distribution" type="tns:WorkDistributionTailoringType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Distribution of the work executed as part of this activity.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>

    <xsd:complexType name="ActivityControlFlowSpecificationTailoringType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.4</a:since>
                <a:container>true</a:container>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:ActivityControlFlowSpecificationType">
                <xsd:sequence>
                    <xsd:element name="tailoringMode" type="tns:TailoringModeType" minOccurs="0" default="overwrite">
                        <xsd:annotation>
                            <xsd:documentation>
                                How the tailoring is applied.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                </xsd:sequence>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>

    <xsd:complexType name="WorkDistributionTailoringType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.4</a:since>
                <a:container>true</a:container>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:WorkDistributionType">
                <xsd:sequence>
                    <xsd:element name="tailoringMode" type="tns:TailoringModeType" minOccurs="0" default="overwrite">
                        <xsd:annotation>
                            <xsd:documentation>
                                How the tailoring is applied.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                </xsd:sequence>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>

    <xsd:simpleType name="TailoringModeType">
        <xsd:annotation>
            <xsd:documentation>
                How the tailoring is applied.
            </xsd:documentation>
            <xsd:appinfo>
                <jaxb:typesafeEnumClass/>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="overwrite">
                <xsd:annotation>
                    <xsd:documentation>
                        <p>
                            Specified container value overwrites everything that was configured for an activity.
                            This is the default.
                        </p>
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="OVERWRITE"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="overwriteSpecified">
                <xsd:annotation>
                    <xsd:documentation>
                        <p>
                            Only specified (first-level) items are overwritten.
                        </p>
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="OVERWRITE_SPECIFIED"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
        </xsd:restriction>
    </xsd:simpleType>

    <xsd:complexType name="ActivityCompositionType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.4</a:since>
                <a:container>true</a:container>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="defaultWorkDefinition" type="tns:WorkDefinitionsType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Describes the work that has to be done, e.g. recomputation, reconciliation, scripting expression
                        execution, and so on. This contains also the necessary parameters, like resource reference,
                        object class, object query, etc.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="activity" type="tns:ActivityDefinitionType" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        TODO
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>

    <xsd:complexType name="ActivityControlFlowSpecificationType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.4</a:since>
                <a:container>true</a:container>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="precondition" type="tns:ExpressionType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Precondition: an expression that governs whether the current activity should be executed or skipped,
                        or whether the task should stop altogether. Should return a single value
                        of ActivityPreconditionOutputType.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="processingOption" type="tns:PartialProcessingTypeType" minOccurs="0" default="automatic">
                <xsd:annotation>
                    <xsd:documentation>
                        Define if the specified activity is executed.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="prerequisite" type="xsd:string" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        TODO
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="errorHandling" type="tns:TaskErrorHandlingStrategyType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Error handling strategy for this activity.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="repeatedExecution" type="tns:ActivityRepeatedExecutionStrategyType" minOccurs="0" default="never">
                <xsd:annotation>
                    <xsd:documentation>
                        Should be the activity re-executed when the task is restarted (e.g. resumed)?
                        NOT IMPLEMENTED YET.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="parallelExecution" type="xsd:boolean" minOccurs="0" default="false">
                <xsd:annotation>
                    <xsd:documentation>
                        Whether the child activities should be executed in parallel.
                        (This is applicable only to composite activities.)
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>

    <xsd:simpleType name="ActivityRepeatedExecutionStrategyType">
        <xsd:annotation>
            <xsd:documentation>
                Should be an activity re-executed when the task is restarted (e.g. resumed)?
                NOT IMPLEMENTED YET.
            </xsd:documentation>
            <xsd:appinfo>
                <jaxb:typesafeEnumClass/>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="never">
                <xsd:annotation>
                    <xsd:documentation>
                        <p>
                            Once executed, the activity should not be re-executed again.
                        </p>
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="NEVER"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="always">
                <xsd:annotation>
                    <xsd:documentation>
                        <p>
                            The activity should be always executed.
                        </p>
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="ALWAYS"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="ifError">
                <xsd:annotation>
                    <xsd:documentation>
                        <p>
                            The activity should be re-executed if it ended with partial or fatal error before.
                        </p>
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="IF_ERROR"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="ifFatalError">
                <xsd:annotation>
                    <xsd:documentation>
                        <p>
                            The activity should be re-executed if it ended with fatal error before.
                        </p>
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="IF_FATAL_ERROR"/>
                        <a:since>4.4</a:since>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
        </xsd:restriction>
    </xsd:simpleType>

    <xsd:complexType name="PartsSubtasksRealizationType">
        <xsd:annotation>
            <xsd:documentation>
                How parts are realized via subtasks.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.4</a:since>
                <a:container>true</a:container>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="taskName" type="xsd:string" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        How to derive names for individual subtasks. It is possible to use substitution strings of
                        {masterTaskName}, {masterTaskHandlerUri} and {index} here.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="handlerUri" type="xsd:anyURI" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Subtasks handler URI pattern.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="copyMasterExtension" type="xsd:boolean" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Whether to copy task extension from the master task.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>

    <xsd:complexType name="ActivitySubtaskSpecificationType">
        <xsd:annotation>
            <xsd:documentation>
                How the part is realized via subtask.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.4</a:since>
                <a:container>true</a:container>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="taskName" type="xsd:string" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        How to derive names for the partition task. It is possible to use substitution strings of {masterTaskName},
                        {masterTaskHandlerUri} and {index} here. Overrides the pattern specified for all parts.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="handlerUri" type="xsd:anyURI" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Partition task handler URI. The default is {masterTaskHandlerUri}#{index}.
                        Overrides the handler URI specified for all parts.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="executionEnvironment" type="tns:TaskExecutionEnvironmentType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Execution environment configuration to use for partition task.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <a:since>4.0</a:since>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="copyMasterExtension" type="xsd:boolean" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Whether to copy task extension from the master task.
                        Overrides the value specified in the parent element.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="durable" type="xsd:boolean" minOccurs="0" default="false">
                <xsd:annotation>
                    <xsd:documentation>
                        Whether the subtasks for parts should be durable i.e. whether they should persist
                        through master task restarts. This is useful e.g. for partitioned validity scanner
                        because each partition keeps its own last scan timestamp.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>

    <xsd:simpleType name="ExecutionModeType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <jaxb:typesafeEnumClass/>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="dryRun">
                <xsd:annotation>
                    <xsd:documentation>
                        <p>
                            Nothing is executed. Just metadata are handled. E.g. during reconciliation
                            only situations in shadows are set.
                        </p>
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="DRY_RUN"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="simulate">
                <xsd:annotation>
                    <xsd:documentation>
                        <p>
                            Changes are computed, but nothing is executed. E.g. preview changes is run for
                            objects and the computed deltas are stored to be processed later. E.g. simulate
                            how many changes will be processed during the reconciliation. After reconciliation
                            finished, proper action is taken to show results during simulation.
                        </p>
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="SIMULATE"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="execute">
                <xsd:annotation>
                    <xsd:documentation>
                        <p>
                            Full execution mode. Changes are computed and also executed.
                        </p>
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="EXECUTE"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="bucketsAnalysis">
                <xsd:annotation>
                    <xsd:documentation>
                        <p>
                            Only the division into buckets is analyzed. Nothing more is executed.
                        </p>
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="BUCKETS_ANALYSIS"/>
                        <a:since>4.4</a:since>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
        </xsd:restriction>
    </xsd:simpleType>

    <xsd:simpleType name="TaskPartPreconditionOutputType">
        <xsd:annotation>
            <xsd:documentation>
                Output of task part precondition expression. Describes how to continue with task execution.
            </xsd:documentation>
            <xsd:appinfo>
                <jaxb:typesafeEnumClass/>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="execute">
                <xsd:annotation>
                    <xsd:documentation>
                        <p>
                            Part should be executed. This is the default value.
                        </p>
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="EXECUTE"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="skip">
                <xsd:annotation>
                    <xsd:documentation>
                        <p>
                            Part evaluation should be skipped.
                        </p>
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="SKIP"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="permanentError">
                <xsd:annotation>
                    <xsd:documentation>
                        <p>
                            Task should stop with a permanent error.
                        </p>
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="PERMANENT_ERROR"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="temporaryError">
                <xsd:annotation>
                    <xsd:documentation>
                        <p>
                            Task should stop with a temporary error.
                        </p>
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="TEMPORARY_ERROR"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
        </xsd:restriction>
    </xsd:simpleType>

    <xsd:complexType name="SchedulerInformationType">
        <xsd:annotation>
            <xsd:documentation>
                Describes the state of the (local) scheduler.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.0</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="node" type="tns:NodeType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Information on the current node. Some security-sensitive or potentially large items might be omitted.
                        (Currently this means secret, secret update timestamp, and task execution limitations.)
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="executingTask" type="tns:TaskType" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        Locally executing tasks. Currently only task OIDs are filled-in here due to performance optimization.
                        But later we may provide more information.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
    </xsd:complexType>
    <xsd:element name="schedulerInformation" type="tns:SchedulerInformationType"/>

    <xsd:complexType name="TaskActivityStateType">
        <xsd:annotation>
            <xsd:documentation>
                Describes the task work state: what has been processed, what is being processed and what is yet to be done.
                Useful for work distribution as well as for stateful suspend+resume feature.
            </xsd:documentation>
            <xsd:appinfo>
                <a:container>true</a:container>
                <a:since>3.8</a:since>
                <a:schemaMigration>
                    <a:element>tns:bucket</a:element>
                    <a:version>4.4</a:version>
                    <a:operation>removed</a:operation>
                </a:schemaMigration>
                <a:schemaMigration>
                    <a:element>tns:numberOfBuckets</a:element>
                    <a:version>4.4</a:version>
                    <a:operation>removed</a:operation>
                </a:schemaMigration>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="localRoot" type="tns:ActivityPathType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        In what part of the activity tree the execution in this task should start.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="localRootActivityExecutionRole" type="tns:ActivityExecutionRoleType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Role of the task in the local root activity execution.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="activity" type="tns:ActivityStateType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Work state for individual activities, organized in the tree.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="tree" type="tns:ActivityTreeStateType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Describes the state of an activity tree. Present only on the root task.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>

    <xsd:complexType name="ActivityStateType">
        <xsd:annotation>
            <xsd:documentation>
                Describes the state of an activity.
            </xsd:documentation>
            <xsd:appinfo>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
                <a:experimental>true</a:experimental>
                <a:elaborate>true</a:elaborate>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="identifier" type="xsd:string" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Identifier of the activity.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="realizationState" type="tns:ActivityRealizationStateType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        State of the activity realization: in progress local, in progress delegated, complete.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="resultStatus" type="tns:OperationResultStatusType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Operation result status of this activity. TODO
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="progress" type="tns:ActivityProgressType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Progress of this activity. Relevant for worker and standalone tasks.
                        (Can be copied to coordinator e.g. if workers are deleted.)
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="statistics" type="tns:ActivityStatisticsType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Statistical information related to activity execution.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="bucketing" type="tns:ActivityBucketingStateType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Information about the bucket processing within the activity.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="counters" type="tns:ActivityCounterGroupsType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Counters related to the execution of the activity, grouped into related categories.
                        One of the categories are counters needed to implement thresholds for policy rules.

                        Note: The counters may be moved to separate repository object later to improve performance.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="workState" type="tns:AbstractActivityWorkStateType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Work (business) state of the activity.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="persistence" type="tns:ActivityStatePersistenceType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        How much is this state information persistent?
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="activity" type="tns:ActivityStateType" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        Work state of child activities.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>

    <xsd:complexType name="ActivityTreeStateType">
        <xsd:annotation>
            <xsd:documentation>
                Describes the state of an activity tree.
            </xsd:documentation>
            <xsd:appinfo>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
                <a:experimental>true</a:experimental>
                <a:elaborate>true</a:elaborate>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="realizationState" type="tns:ActivityTreeRealizationStateType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Realization state of the activity tree.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="activity" type="tns:ActivityStateOverviewType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Overview of the root activity state (and other activities as well, recursively).
                        The whole tree is present here.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>

    <xsd:complexType name="ActivityStateOverviewType">
        <xsd:annotation>
            <xsd:documentation>
                Describes the overview of the state of an activity.
                This information is maintained in the root task only,
                and is an excerpt from state information distributed throughout
                the tree. It is intentionally not a container.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.4</a:since>
                <a:experimental>true</a:experimental>
                <a:elaborate>true</a:elaborate>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="identifier" type="xsd:string" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Identifier of the activity.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="realizationState" type="tns:ActivitySimplifiedRealizationStateType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        State of the activity processing: null (not started), in progress, complete.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="executionState" type="tns:ActivityExecutionStateType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Is the activity really executing now?
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="resultStatus" type="tns:OperationResultStatusType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Operation result status of this activity. TODO
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="taskRef" type="tns:ObjectReferenceType" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        The task(s) in which the activity execution takes place.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <a:objectReferenceTargetType>tns:TaskType</a:objectReferenceTargetType>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="persistence" type="tns:ActivityStatePersistenceType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        How much is this state information persistent?
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="activity" type="tns:ActivityStateOverviewType" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        Work state overview of child activities.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
    </xsd:complexType>

    <xsd:simpleType name="ActivityRealizationStateType">
        <xsd:annotation>
            <xsd:documentation>
                Execution state of an activity.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.4</a:since>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="inProgressLocal">
                <xsd:annotation>
                    <xsd:documentation>
                        Activity is in progress, treated by the current task.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="IN_PROGRESS_LOCAL"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="inProgressDelegated">
                <xsd:annotation>
                    <xsd:documentation>
                        Activity is in progress and it was delegated to a subtask or subtasks.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="IN_PROGRESS_DELEGATED"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="inProgressDistributed">
                <xsd:annotation>
                    <xsd:documentation>
                        Activity is in progress and it was distributed to worker subtasks.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="IN_PROGRESS_DISTRIBUTED"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="complete">
                <xsd:annotation>
                    <xsd:documentation>
                        Activity is complete.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="COMPLETE"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
        </xsd:restriction>
    </xsd:simpleType>

    <xsd:simpleType name="ActivityStatePersistenceType">
        <xsd:annotation>
            <xsd:documentation>
                How much is the activity state (full / overview) persistent?
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.4</a:since>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="perpetual">
                <xsd:annotation>
                    <xsd:documentation>
                        The state should be preserved across activity realizations.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="PERPETUAL"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="perpetualExceptStatistics">
                <xsd:annotation>
                    <xsd:documentation>
                        The state should be preserved across activity realizations.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="PERPETUAL_EXCEPT_STATISTICS"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="singleRealization">
                <xsd:annotation>
                    <xsd:documentation>
                        The state should be preserved for single activity realizations.
                        This is the default.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="SINGLE_REALIZATION"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
        </xsd:restriction>
    </xsd:simpleType>

    <xsd:simpleType name="ActivityTreeRealizationStateType">
        <xsd:annotation>
            <xsd:documentation>
                Realization state of an activity tree.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.4</a:since>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="inPreparation">
                <xsd:annotation>
                    <xsd:documentation>
                        Realization of activity tree is being prepared. For example, state stored during
                        the previous realization is being deleted.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="IN_PREPARATION"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="inProgress">
                <xsd:annotation>
                    <xsd:documentation>
                        Activity tree realization is in progress.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="IN_PROGRESS"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="complete">
                <xsd:annotation>
                    <xsd:documentation>
                        Activity tree realization is complete.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="COMPLETE"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
        </xsd:restriction>
    </xsd:simpleType>

    <xsd:simpleType name="ActivityExecutionRoleType">
        <xsd:annotation>
            <xsd:documentation>
                Role of the task in the execution of the local root activity.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.4</a:since>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="delegate">
                <xsd:annotation>
                    <xsd:documentation>
                        The activity execution was fully delegated to the current task.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="DELEGATE"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="worker">
                <xsd:annotation>
                    <xsd:documentation>
                        The activity execution was distributed to a set of workers, and this is one of them.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="WORKER"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
        </xsd:restriction>
    </xsd:simpleType>

    <xsd:simpleType name="ActivityExecutionStateType">
        <xsd:annotation>
            <xsd:documentation>
                Execution state of an activity - to be used in activity overview.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.4</a:since>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="executing">
                <xsd:annotation>
                    <xsd:documentation>
                        Activity is executing.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="EXECUTING"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="executingReduced">
                <xsd:annotation>
                    <xsd:documentation>
                        Activity is executing, although the speed of execution may be reduced e.g. because of some
                        of the tasks or threads failed. NOT IMPLEMENTED YET.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="EXECUTING_REDUCED"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="notExecuting">
                <xsd:annotation>
                    <xsd:documentation>
                        Activity execution was suspended or interrupted before the activity was complete.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="NOT_EXECUTING"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="complete">
                <xsd:annotation>
                    <xsd:documentation>
                        Activity is complete.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="COMPLETE"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
        </xsd:restriction>
    </xsd:simpleType>

    <xsd:simpleType name="ActivitySimplifiedRealizationStateType">
        <xsd:annotation>
            <xsd:documentation>
                Realization state of an activity - simplified for the sake of activity overview.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.4</a:since>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="inProgress">
                <xsd:annotation>
                    <xsd:documentation>
                        Activity is in progress.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="IN_PROGRESS"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="complete">
                <xsd:annotation>
                    <xsd:documentation>
                        Activity is complete.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="COMPLETE"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
        </xsd:restriction>
    </xsd:simpleType>

    <!--<xsd:simpleType name="ActivityExecutionResultType">-->
    <!--    <xsd:annotation>-->
    <!--        <xsd:documentation>-->
    <!--            Result of an activity execution.-->
    <!--        </xsd:documentation>-->
    <!--        <xsd:appinfo>-->
    <!--            <a:since>4.4</a:since>-->
    <!--            <a:experimental>true</a:experimental>-->
    <!--        </xsd:appinfo>-->
    <!--    </xsd:annotation>-->
    <!--    <xsd:restriction base="xsd:string">-->
    <!--        <xsd:enumeration value="partialError">-->
    <!--            <xsd:annotation>-->
    <!--                <xsd:documentation>-->
    <!--                    Partial error. TODO what does it mean?-->
    <!--                </xsd:documentation>-->
    <!--                <xsd:appinfo>-->
    <!--                    <jaxb:typesafeEnumMember name="PARTIAL_ERROR"/>-->
    <!--                </xsd:appinfo>-->
    <!--            </xsd:annotation>-->
    <!--        </xsd:enumeration>-->
    <!--        <xsd:enumeration value="fatalError">-->
    <!--            <xsd:annotation>-->
    <!--                <xsd:documentation>-->
    <!--                    Fatal error. TODO what does it mean?-->
    <!--                </xsd:documentation>-->
    <!--                <xsd:appinfo>-->
    <!--                    <jaxb:typesafeEnumMember name="FATAL_ERROR"/>-->
    <!--                </xsd:appinfo>-->
    <!--            </xsd:annotation>-->
    <!--        </xsd:enumeration>-->
    <!--    </xsd:restriction>-->
    <!--</xsd:simpleType>-->

    <xsd:complexType name="ActivityBucketingStateType">
        <xsd:annotation>
            <xsd:documentation>
                Information about the bucket processing within an activity.
            </xsd:documentation>
            <xsd:appinfo>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="bucket" type="tns:WorkBucketType" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        Current buckets of work. Some buckets might be present implicitly: if a bucket with
                        sequence number of N is present, it is expected that all unlisted buckets with numbers lower than N
                        are either complete (for coordinator and standalone tasks) or not relevant (for worker tasks).

                        In a similar way, if no free bucket is available and we are not at the end it is expected that some
                        free buckets are yet to be created (for coordinator tasks).
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="numberOfBuckets" type="xsd:int" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        How many buckets are there? This is an indicative information, e.g. to be used when
                        estimating total progress. Relevant only for coordinator and standalone tasks.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="bucketsProcessingRole" type="tns:BucketsProcessingRoleType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Role of this task in the processing of the buckets: standalone executor, coordinator, or worker.
                        (This is somewhat duplicate to TaskActivityStateType.role but has slightly different meaning, so
                        we keep it here.)
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="scavenger" type="xsd:boolean" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Is this task a scavenger i.e. will it wait until the work is done, looking
                        for buckets that could be reclaimed? Applicable only to worker tasks.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="workComplete" type="xsd:boolean" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        True if all the work is complete: there are no more buckets to be processed.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>

    <xsd:complexType name="WorkDistributionType">
        <xsd:annotation>
            <xsd:documentation>
                Describes how we are going to distribute the work that is to be done:
                how to divide it into work buckets, and how to distribute these buckets to worker tasks.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>3.8</a:since>
                <a:container>true</a:container>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="buckets" type="tns:WorkBucketsManagementType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        How to create and manage buckets.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="workers" type="tns:WorkersManagementType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        How to create and manage workers.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="workerThreads" type="xsd:int" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        TODO
                    </xsd:documentation>
                    <xsd:appinfo>
                        <a:since>4.4</a:since>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="subtask" type="tns:ActivitySubtaskSpecificationType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        How is the activity (or children activities) executed in separate subtask(s).
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="autoscaling" type="tns:AutoscalingConfigurationType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Whether and how is this activity work distribution auto-scaled.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>

    <!-- Work buckets configurations -->

    <xsd:complexType name="WorkBucketsManagementType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>3.8</a:since>
                <a:container>true</a:container>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:choice>
                <xsd:element name="numericSegmentation" type="tns:NumericWorkSegmentationType" minOccurs="0">
                    <xsd:annotation>
                        <xsd:documentation>
                            How to partition the work into numeric interval based buckets and manage them.
                        </xsd:documentation>
                    </xsd:annotation>
                </xsd:element>
                <xsd:element name="stringSegmentation" type="tns:StringWorkSegmentationType" minOccurs="0">
                    <xsd:annotation>
                        <xsd:documentation>
                            How to partition the work into string value based buckets and manage them.
                        </xsd:documentation>
                    </xsd:annotation>
                </xsd:element>
                <xsd:element name="oidSegmentation" type="tns:OidWorkSegmentationType" minOccurs="0">
                    <xsd:annotation>
                        <xsd:documentation>
                            How to partition the work into string value based buckets and manage them.
                        </xsd:documentation>
                    </xsd:annotation>
                </xsd:element>
                <xsd:element name="explicitSegmentation" type="tns:ExplicitWorkSegmentationType" minOccurs="0">
                    <xsd:annotation>
                        <xsd:documentation>
                            How to partition the work into filter based buckets and manage them.
                        </xsd:documentation>
                    </xsd:annotation>
                </xsd:element>
                <xsd:element name="segmentation" type="tns:AbstractWorkSegmentationType" minOccurs="0">
                    <xsd:annotation>
                        <xsd:documentation>
                            How to partition the work into buckets and manage them.
                        </xsd:documentation>
                    </xsd:annotation>
                </xsd:element>
            </xsd:choice>
            <xsd:element name="allocation" type="tns:WorkAllocationConfigurationType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Parameters related to buckets allocation process.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>

    <xsd:complexType name="WorkAllocationConfigurationType">
        <xsd:annotation>
            <xsd:documentation>
                Parameters related to buckets allocation process.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>3.8</a:since>
                <a:container>true</a:container>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="bucketCreationBatch" type="xsd:int" minOccurs="0" default="1">
                <xsd:annotation>
                    <xsd:documentation>
                        How many buckets are to be created at once (when needed)?
                        EXPERIMENTAL
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <!-- TODO bucket allocation batch -->
            <xsd:element name="allocateFirst" type="xsd:boolean" minOccurs="0" default="true">
                <xsd:annotation>
                    <xsd:documentation>
                        Should the first available bucket be always allocated?
                        EXPERIMENTAL
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="workAllocationMaxRetries" type="xsd:int" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        How many retries for allocation of a work bucket should be attempted? The default is specified
                        in the system configuration.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="workAllocationRetryIntervalBase" type="xsd:long" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        The base for exponential growth of the retry interval window. The actual delay is computed as

                        random() * retryIntervalBase * 2 ^ (min(retryNumber, exponentialThreshold) - 1)

                        Where retryNumber goes from 1 upwards.

                        The default is specified in the system configuration.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="workAllocationRetryExponentialThreshold" type="xsd:int" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        The retry number from which the retry delay window starts to be constant (instead of exponentially
                        dependent on retry number). The default is specified in the system configuration.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="workAllocationRetryIntervalLimit" type="xsd:long" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Alternative way of limiting the retry delay growth. If specified, this is an absolute limit on the
                        delay window size (i.e. the factor that multiplies the random number of 0..1).
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="workAllocationInitialDelay" type="xsd:long" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Size of random interval for the initial delay. The default is specified in the system configuration.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="workAllocationFreeBucketWaitInterval" type="xsd:long" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        If specified, overrides the time used to wait for free bucket(s) reclamation. This is applied when
                        no free buckets are available but the work is not completely done.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>

    <xsd:complexType name="AbstractWorkSegmentationType">
        <xsd:annotation>
            <xsd:documentation>
                Describes how to segment the work into buckets and manage them.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>3.8</a:since>
                <a:container>true</a:container>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="discriminator" type="t:ItemPathType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Item or OID whose values will used to divide objects into buckets - if applicable.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="matchingRule" type="xsd:anyURI" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Matching rule to be applied when creating filters - if applicable.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="numberOfBuckets" type="xsd:int" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Configurable number of buckets. Optional.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>

    <xsd:complexType name="NumericWorkSegmentationType">
        <xsd:annotation>
            <xsd:documentation>
                Work state management strategy that divides the processing space (represented by an interval of numeric
                values) into a number of work buckets. Each bucket itself is defined as an interval of values.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>3.8</a:since>
                <a:container>true</a:container>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:AbstractWorkSegmentationType">
                <xsd:sequence>
                    <xsd:element name="from" type="xsd:integer" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                Start of the processing space (inclusive). If omitted, 0 is assumed.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="to" type="xsd:integer" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                End of the processing space (exclusive). If not present, both bucketSize and numberOfBuckets
                                must be defined and the upper boundary is determined as their product.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="bucketSize" type="xsd:integer" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                Size of one bucket. If not present it is computed as the total processing space divided by
                                number of buckets (i.e. 'to' and 'numberOfBuckets' must be present).
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                </xsd:sequence>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>

    <xsd:complexType name="StringWorkSegmentationType">
        <xsd:annotation>
            <xsd:documentation>
                Work state management strategy that divides the processing space (represented by a set of string
                values) into a number of work buckets; either based on intervals, prefixes or exact value matching.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>3.8</a:since>
                <a:container>true</a:container>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:AbstractWorkSegmentationType">
                <xsd:sequence>
                    <xsd:element name="boundary" type="tns:BoundarySpecificationType" minOccurs="0" maxOccurs="unbounded">
                        <xsd:annotation>
                            <xsd:documentation>
                                Characters that make up the boundaries at given string position(s).
                            </xsd:documentation>
                            <xsd:appinfo>
                                <a:since>4.3</a:since>
                            </xsd:appinfo>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="boundaryCharacters" type="xsd:string" minOccurs="0" maxOccurs="unbounded">
                        <xsd:annotation>
                            <xsd:documentation>
                                Characters that make up the boundaries. These characters must be sorted.
                                Reserved characters: '-', '$' (to be implemented later)
                                Escaping character: '\'

                                DEPRECATED. Please use boundary instead.
                            </xsd:documentation>
                            <xsd:appinfo>
                                <a:deprecated>true</a:deprecated>
                                <a:deprecatedSince>4.3</a:deprecatedSince>
                            </xsd:appinfo>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="depth" type="xsd:int" minOccurs="0" default="1">
                        <xsd:annotation>
                            <xsd:documentation>
                                If a value N greater than 1 is specified here, values specified by boundary or boundaryCharacters
                                are repeated N times (if values of V1, V2, ..., Vk are specified, the resulting sequence
                                is V1, V2, ..., Vk, V1, V2, ... Vk, etc, with N repetitions - so N*k values in total).
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="comparisonMethod" type="tns:StringWorkBucketsBoundaryMarkingType" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                Whether to use intervals, prefixes or exact value match. Interval matching is the default.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                </xsd:sequence>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>

    <xsd:complexType name="BoundarySpecificationType">
        <xsd:annotation>
            <xsd:documentation>
                Specification of how string-based segments are delineated.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.3</a:since>
                <a:container>true</a:container>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="position" type="xsd:int" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        Position(s) to which the boundary characters apply.

                        Should be specified, because (1) the ordering of boundary specifications is undefined,
                        (2) multiple definitions of the same boundary characters is not possible.

                        Starts at 1.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="characters" type="xsd:string" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Characters that make up the boundaries. These characters must be sorted.
                        Reserved characters: '-', '$' (to be implemented later)
                        Escaping character: '\'
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>
    <xsd:element name="boundarySpecification" type="tns:BoundarySpecificationType" />

    <xsd:complexType name="OidWorkSegmentationType">
        <xsd:annotation>
            <xsd:documentation>
                Work state management strategy that divides the processing space into a number of buckets based on OID values.
                When specified, it provides default values of discriminator=#, boundaryCharacters=0-9a-f.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>3.8</a:since>
                <a:container>true</a:container>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:StringWorkSegmentationType">
                <xsd:sequence>
                </xsd:sequence>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>

    <xsd:simpleType name="StringWorkBucketsBoundaryMarkingType">
        <xsd:annotation>
            <xsd:documentation>
                How to construct work bucket filters based on defined boundary values.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>3.8</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="interval">
                <xsd:annotation>
                    <xsd:documentation>
                        Use greater-than/less-than comparison.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="INTERVAL"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="prefix">
                <xsd:annotation>
                    <xsd:documentation>
                        Use prefix matching.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="PREFIX"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="exactMatch">
                <xsd:annotation>
                    <xsd:documentation>
                        Use exact value matching. This is quite risky and should be used only when you are absolutely sure that
                        boundary values cover all possible values of the discriminator.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="EXACT_MATCH"/>
                        <a:since>4.0</a:since>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
        </xsd:restriction>
    </xsd:simpleType>

    <xsd:complexType name="ExplicitWorkSegmentationType">
        <xsd:annotation>
            <xsd:documentation>
                Work state management strategy that explicitly enumerates the buckets.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>3.8</a:since>
                <a:container>true</a:container>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:AbstractWorkSegmentationType">
                <xsd:sequence>
                    <xsd:element name="content" type="tns:AbstractWorkBucketContentType" minOccurs="0" maxOccurs="unbounded">
                        <xsd:annotation>
                            <xsd:documentation>
                                Work buckets content.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                </xsd:sequence>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>

    <!-- Work bucket runtime structures -->

    <xsd:complexType name="WorkBucketType">
        <xsd:annotation>
            <xsd:documentation>
                Description of a state and content of a work bucket. Buckets are used e.g. to distribute workload
                in multi-node tasks or to implement stateful suspend+resume.
            </xsd:documentation>
            <xsd:appinfo>
                <a:container>true</a:container>
                <a:since>3.8</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="sequentialNumber" type="xsd:int">
                <xsd:annotation>
                    <xsd:documentation>
                        Sequential number of give work bucket. Starting at 1.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="state" type="tns:WorkBucketStateType">
                <xsd:annotation>
                    <xsd:documentation>
                        State of the work bucket: ready, delegated or complete.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="content" type="tns:AbstractWorkBucketContentType">
                <xsd:annotation>
                    <xsd:documentation>
                        Content of the bucket described e.g. as a numeric interval of discriminator values.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="workerRef" type="tns:ObjectReferenceType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Worker task to which this bucket is delegated.
                        Must be set for buckets in DELEGATED state.
                        May be set for buckets in COMPLETE state.
                        Must not be set for buckets in READY state.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <a:objectReferenceTargetType>tns:TaskType</a:objectReferenceTargetType>
                        <a:since>4.0</a:since>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:element>
            <!--<xsd:element name="progress" type="tns:AbstractWorkBucketProgressType">-->
            <!--<xsd:annotation>-->
            <!--<xsd:documentation>-->
            <!--Progress of bucket processing.-->
            <!--</xsd:documentation>-->
            <!--</xsd:annotation>-->
            <!--</xsd:element>-->
            <!--<xsd:element name="processedCount" type="xsd:int" minOccurs="0">-->
            <!--<xsd:annotation>-->
            <!--<xsd:documentation>-->
            <!--Number of items that were suc-->
            <!--</xsd:documentation>-->
            <!--</xsd:annotation>-->
            <!--</xsd:element>-->
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>

    <xsd:complexType name="AbstractWorkBucketContentType">
        <xsd:annotation>
            <xsd:documentation>
                Abstract supertype for description of bucket contents.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>3.8</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
        </xsd:sequence>
    </xsd:complexType>

    <xsd:complexType name="NumericIntervalWorkBucketContentType">
        <xsd:annotation>
            <xsd:documentation>
                Work bucket content defined as a interval of numeric values of discriminator item.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>3.8</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:AbstractWorkBucketContentType">
                <xsd:sequence>
                    <xsd:element name="from" type="xsd:integer" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                Start of the processing space belonging to this bucket (inclusive). If not present, 0 is assumed.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="to" type="xsd:integer" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                End of the processing space belonging to this bucket (exclusive). If not present, it is assumed
                                that this is the last bucket.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                </xsd:sequence>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>

    <xsd:complexType name="StringPrefixWorkBucketContentType">
        <xsd:annotation>
            <xsd:documentation>
                Work bucket content defined using string value prefix.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>3.8</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:AbstractWorkBucketContentType">
                <xsd:sequence>
                    <xsd:element name="prefix" type="xsd:string" minOccurs="0" maxOccurs="unbounded">
                        <xsd:annotation>
                            <xsd:documentation>
                                Prefix(es) that are part of this bucket.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                </xsd:sequence>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>

    <!-- Currently the same content as StringPrefixWorkBucketContentType but let's keep these separate fro conceptual
         as well as for practical reasons (the latter ones being mainly backwards compatibility). -->
    <xsd:complexType name="StringValueWorkBucketContentType">
        <xsd:annotation>
            <xsd:documentation>
                Work bucket content defined using string value.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.0</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:AbstractWorkBucketContentType">
                <xsd:sequence>
                    <xsd:element name="value" type="xsd:string" minOccurs="0" maxOccurs="unbounded">
                        <xsd:annotation>
                            <xsd:documentation>
                                Value(s) that are part of this bucket.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                </xsd:sequence>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>

    <xsd:complexType name="StringIntervalWorkBucketContentType">
        <xsd:annotation>
            <xsd:documentation>
                Work bucket content defined as interval of string values.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>3.8</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:AbstractWorkBucketContentType">
                <xsd:sequence>
                    <xsd:element name="from" type="xsd:string" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                Start of the processing space belonging to this bucket (inclusive). If not present, empty string is assumed.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="to" type="xsd:string" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                End of the processing space belonging to this bucket (exclusive). If not present, it is assumed
                                that this is the last bucket.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                </xsd:sequence>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>

    <xsd:complexType name="FilterWorkBucketContentType">
        <xsd:annotation>
            <xsd:documentation>
                Work bucket content defined explicitly by a filter.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>3.8</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:AbstractWorkBucketContentType">
                <xsd:sequence>
                    <xsd:element ref="q:filter" minOccurs="0" maxOccurs="unbounded">
                        <xsd:annotation>
                            <xsd:documentation>
                                Filter(s) to be used to define the bucket.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                </xsd:sequence>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>

    <xsd:complexType name="NullWorkBucketContentType">
        <xsd:annotation>
            <xsd:documentation>
                "Null" work bucket content: does not restrict the query in any way.
                Used when no bucketing configuration is specified. In that case, a single "null" bucket is created.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.4</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:AbstractWorkBucketContentType">
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>

    <xsd:simpleType name="BucketsProcessingRoleType">
        <xsd:annotation>
            <xsd:documentation>
                Role in the work buckets processing.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.4</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="standalone">
                <xsd:annotation>
                    <xsd:documentation>
                        The task is standalone: it executes all the work itself (single- or multi-threaded).
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="STANDALONE"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="coordinator">
                <xsd:annotation>
                    <xsd:documentation>
                        The task is a coordinator task in a multi-node execution.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="COORDINATOR"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="worker">
                <xsd:annotation>
                    <xsd:documentation>
                        The task is a worker task in a multi-node execution.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="WORKER"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
        </xsd:restriction>
    </xsd:simpleType>

    <xsd:simpleType name="TaskKindType">
        <xsd:annotation>
            <xsd:documentation>
                Kind of task with respect to the work state management.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>3.8</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="standalone">
                <xsd:annotation>
                    <xsd:documentation>
                        The task is standalone: it executes all the work itself (single- or multi-threaded).
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="STANDALONE"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="coordinator">
                <xsd:annotation>
                    <xsd:documentation>
                        The task is a coordinator task in a multi-node execution.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="COORDINATOR"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="worker">
                <xsd:annotation>
                    <xsd:documentation>
                        The task is a worker task in a multi-node execution.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="WORKER"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="partitionedMaster">
                <xsd:annotation>
                    <xsd:documentation>
                        The task is a master task that is partitioned into subtasks.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="PARTITIONED_MASTER"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
        </xsd:restriction>
    </xsd:simpleType>

    <xsd:simpleType name="WorkBucketStateType">
        <xsd:annotation>
            <xsd:documentation>
                State of the work bucket.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>3.8</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="ready">
                <xsd:annotation>
                    <xsd:documentation>
                        The bucket is ready to be delegated (when in coordinator) or to be directly processed (when in worker
                        or standalone task).
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="READY"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="delegated">
                <xsd:annotation>
                    <xsd:documentation>
                        The bucket has been delegated for processing by a worker task. (May occur in coordinator only.)
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="DELEGATED"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="complete">
                <xsd:annotation>
                    <xsd:documentation>
                        The bucket has been processed.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="COMPLETE"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
        </xsd:restriction>
    </xsd:simpleType>

    <xsd:complexType name="NodeType">
        <xsd:annotation>
            <xsd:documentation>
                Node describes a single installation of midPoint. MidPoint installations can work in cluster.
                The Node objects are the way how the nodes in cluster know about each other.
            </xsd:documentation>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:AssignmentHolderType">
                <xsd:sequence>
                    <xsd:element name="nodeIdentifier" type="xsd:string">
                        <xsd:annotation>
                            <xsd:documentation>
                                Short, cluster-wide identifier of the node. It may be a hostname or a short number node ID.
                                Very short string is advised as this identifier is used to generate other identifiers
                                (e.g. lightweight IDs), it is used in audit records, etc.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="hostname" type="xsd:string" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                Hostname of the node that can be used by other nodes to contact this node over the
                                network. It is automatically determined and updated.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="url" type="xsd:string" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                URL of midPoint that can be used by other nodes to contact this node over the network.
                                It is either provided manually (see urlOverride), constructed using
                                infrastructure/intraClusterHttpUrlPattern configuration property, or determined
                                automatically.
                            </xsd:documentation>
                            <xsd:appinfo>
                                <a:since>3.9</a:since>
                            </xsd:appinfo>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="urlOverride" type="xsd:string" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                Value to override constructed or determined URL.
                            </xsd:documentation>
                            <xsd:appinfo>
                                <a:since>4.0</a:since>
                            </xsd:appinfo>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="ipAddress" type="xsd:string" minOccurs="0" maxOccurs="unbounded">
                        <xsd:annotation>
                            <xsd:documentation>
                                IP addresses of the node (both IPv4 and IPv6 addresses in textual notation)
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="jmxPort" type="xsd:int" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                Port at which this node can be contacted via JMX.
                            </xsd:documentation>
                            <xsd:appinfo>
                                <a:deprecated>true</a:deprecated>
                                <a:deprecatedSince>4.0</a:deprecatedSince>
                                <a:plannedRemoval>4.4</a:plannedRemoval>
                            </xsd:appinfo>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="lastCheckInTime" type="xsd:dateTime" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                The time when this node last checked-in.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="operationalStatus" type="tns:NodeOperationalStateType" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                Basic node operational state: whether it is up (e.g. should be accepting REST/JMX queries),
                                or it is down (known to be turned off or just not checking-in for a longer time), or starting.
                                Does NOT indicate anything about the scheduler status.

                                Supersedes "running" property.

                                TODO rename to operationalState.
                            </xsd:documentation>
                            <xsd:appinfo>
                                <a:since>4.1</a:since>
                            </xsd:appinfo>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="running" type="xsd:boolean" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                Whether this node is running, i.e. it can be queried via JMX.
                                (This does not necessarily mean that the scheduler thread and task threads are running!)

                                DEPRECATED. Replaced by operationalState.
                            </xsd:documentation>
                            <xsd:appinfo>
                                <a:deprecated>true</a:deprecated>
                                <a:deprecatedSince>4.1</a:deprecatedSince>
                            </xsd:appinfo>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="clustered" type="xsd:boolean" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                Whether this node is a part of a cluster. Used to detect misconfigurations.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="internalNodeIdentifier" type="xsd:string">
                        <xsd:annotation>
                            <xsd:documentation>
                                Internal (generated) node identifier, used primarily to detect whether
                                the node information was not overwritten by another node.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="executionState" type="tns:NodeExecutionStateType">
                        <xsd:annotation>
                            <xsd:documentation>
                                Actual node state from the point of executing tasks.
                                This field is TRANSIENT. It must only be used in runtime. It should
                                never be stored in the repository.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="errorState" type="tns:NodeErrorStateType">
                        <xsd:annotation>
                            <xsd:documentation>
                                More detailed characterization of the error state.
                                This field is TRANSIENT. It must only be used in runtime. It should
                                never be stored in the repository.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="connectionResult" type="tns:OperationResultType" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                Result of the operation that connected to this node.
                                This field is TRANSIENT. It must only be used in runtime. It should
                                never be stored in the repository.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="build" type="tns:BuildInformationType" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                Information about midPoint build running on this node.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="secret" type="t:ProtectedStringType" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                The secret used for intra-cluster authentication.
                            </xsd:documentation>
                            <xsd:appinfo>
                                <a:since>4.0</a:since>
                            </xsd:appinfo>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="secretUpdateTimestamp" type="xsd:dateTime" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                When was the secret created or last changed.
                            </xsd:documentation>
                            <xsd:appinfo>
                                <a:since>4.0</a:since>
                            </xsd:appinfo>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="taskExecutionLimitations" type="tns:TaskExecutionLimitationsType" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                Limitations for execution of tasks on this node.
                            </xsd:documentation>
                            <xsd:appinfo>
                                <a:since>3.7</a:since>
                            </xsd:appinfo>
                        </xsd:annotation>
                    </xsd:element>
                </xsd:sequence>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>
    <xsd:element name="node" type="tns:NodeType" substitutionGroup="c:object"/>

    <xsd:complexType name="TaskExecutionLimitationsType">
        <xsd:annotation>
            <xsd:documentation>
                Limitations for execution of tasks on a given node.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>3.7</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="groupLimitation" type="tns:TaskGroupExecutionLimitationType" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        Limitations of execution for individual task groups.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
    </xsd:complexType>

    <xsd:complexType name="TaskGroupExecutionLimitationType">
        <xsd:annotation>
            <xsd:documentation>
                Limitations for execution of a task group on a given node.
                EXPERIMENTAL. Will probably change in the future, when task groups will be created as regular midPoint objects.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>3.7</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="groupName" type="xsd:string" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Name of the group to apply limitation to. Null or empty means "tasks with no specified group". Asterisk (*) means
                        that the limit applies to each groups not listed here (individually).
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="limit" type="xsd:int" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        How many threads can be allocated to tasks within the given group. 0 means such tasks cannot be run
                        on the current node. Null (i.e. no "limit" property) means this group can run on this node without
                        explicit limitations; bound only by the total number of available threads.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
    </xsd:complexType>

    <xsd:simpleType name="NodeOperationalStateType">
        <xsd:annotation>
            <xsd:documentation>
                Basic node operational state: whether it is up (e.g. accepting REST/JMX queries),
                or it is down (known to be turned off or just not checking-in for a longer time), or starting.
                Does NOT indicate anything about the scheduler state.
            </xsd:documentation>
        </xsd:annotation>
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="up">
                <xsd:annotation>
                    <xsd:documentation>
                        Node is up and should respond to REST/JMX queries.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="UP"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="down">
                <xsd:annotation>
                    <xsd:documentation>
                        Node is down. Either it was turned off or it has not checked in for a longer time.
                        There's no point in trying to contact it via REST or JMX.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="DOWN"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="down">
                <xsd:annotation>
                    <xsd:documentation>
                        Node is down. Either it was turned off or it has not checked in for a longer time.
                        There's no point in trying to contact it via REST or JMX.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="DOWN"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="starting">
                <xsd:annotation>
                    <xsd:documentation>
                        Node is starting. It is expected it will be alive soon but should not be contacted via REST/JMX yet.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="STARTING"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
        </xsd:restriction>
    </xsd:simpleType>

    <xsd:simpleType name="NodeExecutionStateType">
        <xsd:annotation>
            <xsd:documentation>
                Node state from the user's point of view.
                TODO decide what to do with this data type.
            </xsd:documentation>
        </xsd:annotation>
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="running">
                <xsd:annotation>
                    <xsd:documentation>
                        Node is running, task scheduler is running.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="RUNNING"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="paused">
                <xsd:annotation>
                    <xsd:documentation>
                        Node is running, scheduler is paused.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="PAUSED"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="notCheckingIn">
                <xsd:annotation>
                    <xsd:documentation>
                        Node has not checked in for at least "nodeTimeout" seconds (default is 30).
                        But it has not declared itself as turned off.

                        Note that other nodes can declare a node as turned off after not checking in for
                        "nodeAlivenessTimeout" seconds (default is 900).

                        This state is available only for remote nodes, of course.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="NOT_CHECKING_IN"/>
                        <a:since>4.1</a:since>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="starting">
                <xsd:annotation>
                    <xsd:documentation>
                        Node is starting. It is expected it will be alive soon but should not be contacted via REST/JMX yet.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="STARTING"/>
                        <a:since>4.1</a:since>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="down">
                <xsd:annotation>
                    <xsd:documentation>
                        Node is turned off (its "running" flag is set to false). It either declares itself to be in this state
                        when going down, or other nodes can do it after it does not check in for "nodeAlivenessTimeout" seconds
                        (default is 900).
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="DOWN"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="error">
                <xsd:annotation>
                    <xsd:documentation>
                        Node error (see NodeErrorStateType for more details).
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="ERROR"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="communicationError">
                <xsd:annotation>
                    <xsd:documentation>
                        State unknown due to communication error.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="COMMUNICATION_ERROR"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
        </xsd:restriction>
    </xsd:simpleType>

    <xsd:simpleType name="NodeErrorStateType">
        <xsd:annotation>
            <xsd:documentation>
                State of this node w.r.t. error conditions.
                Generally speaking, if node errorState != OK, tasks cannot be scheduled on this node.
                This is a dynamic information, not stored in the repository.
            </xsd:documentation>
        </xsd:annotation>
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="ok">
                <xsd:annotation>
                    <xsd:documentation>
                        Everything is OK.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="OK"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="duplicateNodeIdOrName">
                <xsd:annotation>
                    <xsd:documentation>
                        More nodes with the same ID or name (currently ID is the same as name, but in the future they might be different).
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="DUPLICATE_NODE_ID_OR_NAME"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="nonClusteredNodeWithOthers">
                <xsd:annotation>
                    <xsd:documentation>
                        A non-clustered node runs along other (clustered or non-clustered) nodes.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="NON_CLUSTERED_NODE_WITH_OTHERS"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="localConfigurationError">
                <xsd:annotation>
                    <xsd:documentation>
                        Local task manager is not configured properly, so it cannot even be started.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="LOCAL_CONFIGURATION_ERROR"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="localInitializationError">
                <xsd:annotation>
                    <xsd:documentation>
                        Other kind of initialization error.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="LOCAL_INITIALIZATION_ERROR"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="nodeRegistrationFailed">
                <xsd:annotation>
                    <xsd:documentation>
                        It was not possible to register node in repository due to a permanent error.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="NODE_REGISTRATION_FAILED"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
        </xsd:restriction>
    </xsd:simpleType>

    <xsd:complexType name="EnvironmentalPerformanceInformationType">
        <xsd:annotation>
            <xsd:documentation>
                Statistics related to performance and state of external environment, namely provisioning via connectors,
                mappings (as these might contain code that invokes external systems), and notifications.

                These are meant to diagnose performance problems that could stem from factors that are outside midPoint.

                LastMessage can be used to diagnose seemingly "frozen" midPoint that waits e.g. for completion of an external operation.
                These messages contain information about start and end of external calls: ICF operations, mappings invocation, notification
                invocation.
            </xsd:documentation>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="provisioningStatistics" type="tns:ProvisioningStatisticsType" minOccurs="0" />
            <xsd:element name="mappingsStatistics" type="tns:MappingsStatisticsType" minOccurs="0" />
            <xsd:element name="notificationsStatistics" type="tns:NotificationsStatisticsType" minOccurs="0" />
            <xsd:element name="lastMessageTimestamp" type="xsd:dateTime" minOccurs="0" />
            <xsd:element name="lastMessage" type="xsd:string" minOccurs="0" />
        </xsd:sequence>
    </xsd:complexType>

    <xsd:complexType name="ProvisioningStatisticsType">
        <xsd:annotation>
            <xsd:documentation>
                Statistical information on operations executed on resources.
                It is meant to help diagnose performance problems induced by specific source or target resources.
            </xsd:documentation>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="entry" type="tns:ProvisioningStatisticsEntryType" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        Entries related to individual resources and their object classes.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
    </xsd:complexType>

    <xsd:complexType name="ProvisioningStatisticsEntryType">
        <xsd:annotation>
            <xsd:documentation>
                Statistical information on operations executed on a specified resource, dealing with given object class.
            </xsd:documentation>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="resourceRef" type="tns:ObjectReferenceType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Reference to the resource. It should have name filled-in.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <a:objectReferenceTargetType>tns:ResourceType</a:objectReferenceTargetType>
                        <a:since>4.3</a:since>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="objectClass" type="xsd:QName" minOccurs="0" />
            <xsd:element name="operation" type="tns:ProvisioningStatisticsOperationEntryType" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        Information on operations done on given resource and object class.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <a:since>4.3</a:since>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:element>

            <!-- The following are deprecated and not used any more -->
            <xsd:element name="resource" type="xsd:string" minOccurs="0" />
            <xsd:element name="getSuccess" type="xsd:int" minOccurs="0" />
            <xsd:element name="getFailure" type="xsd:int" minOccurs="0" />
            <xsd:element name="searchSuccess" type="xsd:int" minOccurs="0" />
            <xsd:element name="searchFailure" type="xsd:int" minOccurs="0" />
            <xsd:element name="createSuccess" type="xsd:int" minOccurs="0" />
            <xsd:element name="createFailure" type="xsd:int" minOccurs="0" />
            <xsd:element name="updateSuccess" type="xsd:int" minOccurs="0" />
            <xsd:element name="updateFailure" type="xsd:int" minOccurs="0" />
            <xsd:element name="deleteSuccess" type="xsd:int" minOccurs="0" />
            <xsd:element name="deleteFailure" type="xsd:int" minOccurs="0" />
            <xsd:element name="syncSuccess" type="xsd:int" minOccurs="0" />
            <xsd:element name="syncFailure" type="xsd:int" minOccurs="0" />
            <xsd:element name="scriptSuccess" type="xsd:int" minOccurs="0" />
            <xsd:element name="scriptFailure" type="xsd:int" minOccurs="0" />
            <xsd:element name="otherSuccess" type="xsd:int" minOccurs="0" />
            <xsd:element name="otherFailure" type="xsd:int" minOccurs="0" />
            <xsd:element name="averageTime" type="xsd:long" minOccurs="0" />
            <xsd:element name="minTime" type="xsd:long" minOccurs="0" />
            <xsd:element name="maxTime" type="xsd:long" minOccurs="0" />
            <xsd:element name="totalTime" type="xsd:long" minOccurs="0" />
        </xsd:sequence>
    </xsd:complexType>

    <xsd:complexType name="ProvisioningStatisticsOperationEntryType">
        <xsd:annotation>
            <xsd:documentation>
                Information on operations of given type and result status.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.3</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="operation" type="xsd:string" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Plain operation name, e.g. get, search, etc. Intentionally a free-form string, not an enum.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="status" type="tns:OperationResultStatusType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Operation result status. Should not be null.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="count" type="xsd:int" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Number of operations of given type and status.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="totalTime" type="xsd:long" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Total execution time of operations of given type and status (in milliseconds).
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="minTime" type="xsd:long" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Minimal execution time of an operation of given type and status (in milliseconds).
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="maxTime" type="xsd:long" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Maximal execution time of an operation of given type and status (in milliseconds).
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
    </xsd:complexType>

    <xsd:complexType name="MappingsStatisticsType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="entry" type="tns:MappingsStatisticsEntryType" minOccurs="0" maxOccurs="unbounded" />
        </xsd:sequence>
    </xsd:complexType>

    <xsd:complexType name="MappingsStatisticsEntryType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="object" type="xsd:string" minOccurs="0" />
            <xsd:element name="count" type="xsd:int" />
            <xsd:element name="averageTime" type="xsd:long" minOccurs="0" />
            <xsd:element name="minTime" type="xsd:long" minOccurs="0" />
            <xsd:element name="maxTime" type="xsd:long" minOccurs="0" />
            <xsd:element name="totalTime" type="xsd:long" />
        </xsd:sequence>
    </xsd:complexType>

    <xsd:complexType name="NotificationsStatisticsType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="entry" type="tns:NotificationsStatisticsEntryType" minOccurs="0" maxOccurs="unbounded" />
        </xsd:sequence>
    </xsd:complexType>

    <xsd:complexType name="NotificationsStatisticsEntryType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="transport" type="xsd:string" minOccurs="0" />
            <xsd:element name="countSuccess" type="xsd:int" />
            <xsd:element name="countFailure" type="xsd:int" />
            <xsd:element name="averageTime" type="xsd:long" minOccurs="0" />
            <xsd:element name="minTime" type="xsd:long" minOccurs="0" />
            <xsd:element name="maxTime" type="xsd:long" minOccurs="0" />
            <xsd:element name="totalTime" type="xsd:long" />
        </xsd:sequence>
    </xsd:complexType>

    <xsd:complexType name="IterativeTaskInformationType">
        <xsd:annotation>
            <xsd:documentation>
                High-level information about execution of actions that are carried out iteratively on a set of items
                (typically objects; but an item can be a change as well).

                This may be any iterative task: live sync, reconciliation, focus recomputation, etc.
                Even bulk actions can be seen as iterative tasks, even though they can contain multiple nested or subsequent
                iterations.

                This type says how many items were processed successfully or not, how long did it take, and what was last item
                in each category. Also what are the currently processed items.
            </xsd:documentation>
            <xsd:appinfo>
                <a:container>true</a:container>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>

            <xsd:element name="part" type="tns:IterativeTaskPartItemsProcessingInformationType" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        Iterative task information for individual task parts.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>

            <!-- deprecated data - kept only to make parsers happy -->
            <xsd:element name="lastSuccessObjectName" type="xsd:string" minOccurs="0" />
            <xsd:element name="lastSuccessObjectDisplayName" type="xsd:string" minOccurs="0" />
            <xsd:element name="lastSuccessObjectType" type="xsd:QName" minOccurs="0" />
            <xsd:element name="lastSuccessObjectOid" type="xsd:string" minOccurs="0" />
            <xsd:element name="lastSuccessEndTimestamp" type="xsd:dateTime" minOccurs="0" />
            <xsd:element name="lastSuccessDuration" type="xsd:long" minOccurs="0" />
            <xsd:element name="totalSuccessDuration" type="xsd:long" />
            <xsd:element name="totalSuccessCount" type="xsd:int" />

            <xsd:element name="lastFailureObjectName" type="xsd:string" minOccurs="0" />
            <xsd:element name="lastFailureObjectDisplayName" type="xsd:string" minOccurs="0" />
            <xsd:element name="lastFailureObjectType" type="xsd:QName" minOccurs="0" />
            <xsd:element name="lastFailureObjectOid" type="xsd:string" minOccurs="0" />
            <xsd:element name="lastFailureEndTimestamp" type="xsd:dateTime" minOccurs="0" />
            <xsd:element name="lastFailureDuration" type="xsd:long" minOccurs="0" />
            <xsd:element name="totalFailureDuration" type="xsd:long" />
            <xsd:element name="totalFailureCount" type="xsd:int" />
            <xsd:element name="lastFailureExceptionMessage" type="xsd:string" minOccurs="0" />

            <xsd:element name="currentObjectName" type="xsd:string" minOccurs="0" />
            <xsd:element name="currentObjectDisplayName" type="xsd:string" minOccurs="0" />
            <xsd:element name="currentObjectType" type="xsd:QName" minOccurs="0" />
            <xsd:element name="currentObjectOid" type="xsd:string" minOccurs="0" />
            <xsd:element name="currentObjectStartTimestamp" type="xsd:dateTime" minOccurs="0" />
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>

    <xsd:complexType name="IterativeTaskPartItemsProcessingInformationType">
        <xsd:annotation>
            <xsd:documentation>
                Information item processing within specified task part.
            </xsd:documentation>
            <xsd:appinfo>
                <a:experimental>true</a:experimental>
                <a:container>true</a:container>
                <a:since>4.3</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="partIdentifier" type="xsd:string" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        URI of the part that this information pertains to.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="processed" type="tns:ProcessedItemSetType" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        Items that have been processed, with a given outcome.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="current" type="tns:ProcessedItemType" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        Items that are currently being processed by the task.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="execution" type="tns:ActivityExecutionRecordType" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        Information about individual task part executions. Needed e.g. to compute real throughput.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>

    <xsd:complexType name="ActivityItemProcessingStatisticsType">
        <xsd:annotation>
            <xsd:documentation>
                Information about iteration process in given activity.
            </xsd:documentation>
            <xsd:appinfo>
                <a:experimental>true</a:experimental>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="processed" type="tns:ProcessedItemSetType" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        Items that have been processed, with a given outcome.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="current" type="tns:ProcessedItemType" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        Items that are currently being processed by the task.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="execution" type="tns:ActivityExecutionRecordType" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        Information about individual activity executions. Needed e.g. to compute real throughput.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>

    <xsd:complexType name="ActivityExecutionRecordType">
        <xsd:annotation>
            <xsd:documentation>
                Information about individual activity execution. Needed e.g. to compute real throughput.
            </xsd:documentation>
            <xsd:appinfo>
                <a:experimental>true</a:experimental>
                <a:container>true</a:container>
                <a:since>4.3</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="startTimestamp" type="xsd:dateTime" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        When the execution started.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="endTimestamp" type="xsd:dateTime" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        When the execution ended (or current time, in order to avoid information loss).
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>

    <xsd:complexType name="ProcessedItemSetType">
        <xsd:annotation>
            <xsd:documentation>
                Describes set of items that are or have been processed.
            </xsd:documentation>
            <xsd:appinfo>
                <a:experimental>true</a:experimental>
                <a:container>true</a:container>
                <a:since>4.3</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:OutcomeKeyedCounterType">
                <xsd:sequence>
                    <!-- outcome and count are inherited -->
                    <xsd:element name="duration" type="xsd:double" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                Total time spent while processing items in this set (in milliseconds).
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="lastItem" type="tns:ProcessedItemType" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                Last item in this set.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                </xsd:sequence>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>

    <xsd:complexType name="ProcessedItemType">
        <xsd:annotation>
            <xsd:documentation>
                Describes an item (typically an object) that is or has been processed.
            </xsd:documentation>
            <xsd:appinfo>
                <a:experimental>true</a:experimental>
                <a:container>true</a:container>
                <a:since>4.3</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="name" type="xsd:string" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Name of an item. Typically the object name.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="displayName" type="xsd:string" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Display name of an item. For example, user name, org display name, and so on.
                        Null if not present or not applicable for given item type.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="type" type="xsd:QName" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Related object type. For example, c:UserType or c:ShadowType.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="oid" type="xsd:string" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Related object OID, if known.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="startTimestamp" type="xsd:dateTime" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        When the processing of the item started.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="endTimestamp" type="xsd:dateTime" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        When the processing of the item finished. Null if the processing has not finished yet.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="message" type="xsd:string" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Message describing the processing. Typically here is the exception message for failed items.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="operationId" type="xsd:long" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Internal operation identifier. Has no meaning outside midPoint internal structures.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>

    <xsd:complexType name="ActivitySynchronizationStatisticsType">
        <xsd:annotation>
            <xsd:documentation>
                Information about synchronization situations of objects processed by synchronization-related tasks:
                live sync, import, reconciliation. Currently it shows just counters for possible sync situations.
            </xsd:documentation>
            <xsd:appinfo>
                <a:container>true</a:container>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="transition" type="tns:SynchronizationSituationTransitionType" minOccurs="0" maxOccurs="unbounded" />

            <!-- The following is not used anymore -->
            <xsd:element name="countProtected" type="xsd:int" minOccurs="0" />
            <xsd:element name="countNoSynchronizationPolicy" type="xsd:int" minOccurs="0" />
            <xsd:element name="countSynchronizationDisabled" type="xsd:int" minOccurs="0" />
            <xsd:element name="countNotApplicableForTask" type="xsd:int" minOccurs="0" />
            <xsd:element name="countDeleted" type="xsd:int" minOccurs="0" />
            <xsd:element name="countDisputed" type="xsd:int" minOccurs="0" />
            <xsd:element name="countLinked" type="xsd:int" minOccurs="0" />
            <xsd:element name="countUnlinked" type="xsd:int" minOccurs="0" />
            <xsd:element name="countUnmatched" type="xsd:int" minOccurs="0" />
            <xsd:element name="countProtectedAfter" type="xsd:int" minOccurs="0" />
            <xsd:element name="countNoSynchronizationPolicyAfter" type="xsd:int" minOccurs="0" />
            <xsd:element name="countSynchronizationDisabledAfter" type="xsd:int" minOccurs="0" />
            <xsd:element name="countNotApplicableForTaskAfter" type="xsd:int" minOccurs="0" />
            <xsd:element name="countDeletedAfter" type="xsd:int" minOccurs="0" />
            <xsd:element name="countDisputedAfter" type="xsd:int" minOccurs="0" />
            <xsd:element name="countLinkedAfter" type="xsd:int" minOccurs="0" />
            <xsd:element name="countUnlinkedAfter" type="xsd:int" minOccurs="0" />
            <xsd:element name="countUnmatchedAfter" type="xsd:int" minOccurs="0" />
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>

    <xsd:complexType name="SynchronizationSituationTransitionType">
        <xsd:annotation>
            <xsd:documentation>
                Describes how many times given synchronization situation transition has occurred.
            </xsd:documentation>
            <xsd:appinfo>
                <a:container>true</a:container>
                <a:experimental>true</a:experimental>
                <a:since>4.3</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="onProcessingStart" type="tns:SynchronizationSituationType" minOccurs="0" />
            <xsd:element name="onSynchronizationStart" type="tns:SynchronizationSituationType" minOccurs="0" />
            <xsd:element name="onSynchronizationEnd" type="tns:SynchronizationSituationType" minOccurs="0" />
            <xsd:element name="exclusionReason" type="tns:SynchronizationExclusionReasonType" minOccurs="0" />
            <xsd:element name="counter" type="tns:OutcomeKeyedCounterType" minOccurs="0" maxOccurs="unbounded"/>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>
    <xsd:element name="synchronizationSituationTransition" type="tns:SynchronizationSituationTransitionType"/>

    <xsd:complexType name="ActivityActionsExecutedType">
        <xsd:annotation>
            <xsd:documentation>
                Shows what actions were executed. Currently there are only basic actions (ADD, MODIFY, DELETE) carried out on
                basic categories of objects (object types, e.g. UserType, RoleType, OrgType, ShadowType, ...).

                This gives a quick overview what e.g. import, livesync or reconciliation task is really doing.
                For example, if it really creates new users, or if it deletes anything, etc.

                Two categories of statistics are described: "all" and "resulting".
                The former describes all operations carried out, whereas the latter describes only the "high-level" or "externally visible" ones.
                An example: if a live sync task detects a new resource objects, creates appropriate user, and modifies it twice (because of
                outbound/inbound/template/etc interplay), the "all" category would contain 1xADD and 2xMODIFY for that user. However,
                the "resulting" category shows what the external observer would expect - that 1 user was added (so, 1xADD).
                Note that the behavior of "resulting" action determination is still experimental, and need to be specified more
                precisely, e.g. with regards to operation failures.

                In future it would be nice to distinguish e.g. between shadows on different resources.

                Also, the semantics of operations on ShadowType should be defined more precisely - namely,
                whether an operation means "operation on repository shadow" or "operation on resource object".
                Currently, it means both of them. And some of the shadow related operations are not counted,
                namely those that are carried out autonomously by the provisioning module - e.g. creating repo
                shadows when resource objects are discovered. Also, displaying the result of operations that
                are handled by consistency mechanism is defined quite well.

                Overall, while counters related to focal objects (users, roles, orgs) are relatively well defined,
                counters related to shadows need some clarification.
            </xsd:documentation>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="objectActionsEntry" type="tns:ObjectActionsExecutedEntryType" minOccurs="0" maxOccurs="unbounded"/>
            <xsd:element name="resultingObjectActionsEntry" type="tns:ObjectActionsExecutedEntryType" minOccurs="0" maxOccurs="unbounded"/>
        </xsd:sequence>
    </xsd:complexType>

    <xsd:complexType name="ObjectActionsExecutedEntryType">
        <xsd:annotation>
            <xsd:documentation>
                Actions executed on a given object type, with given operation (change type) and via given channel.
            </xsd:documentation>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="objectType" type="xsd:QName" />
            <xsd:element name="operation" type="t:ChangeTypeType" />
            <xsd:element name="channel" type="xsd:string" minOccurs="0" />
            <xsd:element name="totalSuccessCount" type="xsd:int" />
            <xsd:element name="lastSuccessObjectName" type="xsd:string" minOccurs="0" />
            <xsd:element name="lastSuccessObjectDisplayName" type="xsd:string" minOccurs="0" />
            <xsd:element name="lastSuccessObjectOid" type="xsd:string" minOccurs="0" />
            <xsd:element name="lastSuccessTimestamp" type="xsd:dateTime" minOccurs="0" />
            <xsd:element name="totalFailureCount" type="xsd:int"  />
            <xsd:element name="lastFailureObjectName" type="xsd:string" minOccurs="0" />
            <xsd:element name="lastFailureObjectDisplayName" type="xsd:string" minOccurs="0" />
            <xsd:element name="lastFailureObjectOid" type="xsd:string" minOccurs="0" />
            <xsd:element name="lastFailureExceptionMessage" type="xsd:string" minOccurs="0" />
            <xsd:element name="lastFailureTimestamp" type="xsd:dateTime" minOccurs="0" />
        </xsd:sequence>
    </xsd:complexType>

    <xsd:complexType name="TaskErrorHandlingStrategyType">
        <xsd:annotation>
            <xsd:documentation>
                Specifies a strategy for handling errors during iterative tasks.
                TEMPORARY. EXPERIMENTAL.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.3</a:since>
                <a:container>true</a:container>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="entry" type="tns:TaskErrorHandlingStrategyEntryType" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        A single entry of the strategy: describes a reaction on particular error situation.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>
    <xsd:element name="taskErrorHandlingStrategy" type="tns:TaskErrorHandlingStrategyType"/>

    <xsd:complexType name="TaskErrorHandlingStrategyEntryType">
        <xsd:annotation>
            <xsd:documentation>
                Specifies a reaction when a given error during task execution occurs.
                TEMPORARY. EXPERIMENTAL.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.3</a:since>
                <a:container>true</a:container>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="order" type="xsd:int" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Order in which this entry is to be evaluated. (Related to other entries.) Smaller numbers
                        go first. Entries with no order go last.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="situation" type="tns:TaskErrorSituationSelectorType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        A situation that can occur.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="reaction" type="tns:TaskErrorReactionType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Reaction to the situation.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>
    <xsd:element name="taskErrorHandlingStrategyEntry" type="tns:TaskErrorHandlingStrategyEntryType"/>

    <xsd:complexType name="TaskErrorSituationSelectorType">
        <xsd:annotation>
            <xsd:documentation>
                Description of an error condition to act on.
                TEMPORARY. EXPERIMENTAL.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.3</a:since>
                <a:container>true</a:container>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="status" type="tns:OperationResultStatusType" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        Operation result status to match. Can be either PARTIAL_ERROR or FATAL_ERROR.
                        If not present, we decide solely on error category. If error categories are not specified,
                        any error matches.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="errorCategory" type="tns:ErrorCategoryType" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        Error category (network, security, policy, ...) to match. Note that some errors are not propagated
                        to the level where they can be recognized by this selector. So be careful and consider this feature
                        to be highly experimental.
                        If not present, we decide solely on the status.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>
    <xsd:element name="taskErrorSituationSelector" type="tns:TaskErrorSituationSelectorType"/>

    <xsd:complexType name="TaskErrorReactionType">
        <xsd:annotation>
            <xsd:documentation>
                What should a task do when an error of given type is encountered?
                Only some combinations of values are allowed: ignore (+ stopAfter),
                retryLater (+ stopAfter), stop.
                TEMPORARY. EXPERIMENTAL.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.3</a:since>
                <a:container>true</a:container>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="ignore" type="tns:IgnoreErrorReactionType" minOccurs="0"/>
            <xsd:element name="stop" type="tns:StopProcessingReactionType" minOccurs="0"/>
            <xsd:element name="retryLater" type="tns:RetryLaterReactionType" minOccurs="0"/>
            <xsd:element name="stopAfter" type="xsd:int" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Task is stopped after seeing this number of errors.
                        TEMPORARY. Most probably will be replaced by the thresholds mechanism.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>
    <xsd:element name="taskErrorReaction" type="tns:TaskErrorReactionType"/>

    <xsd:complexType name="IgnoreErrorReactionType">
        <xsd:annotation>
            <xsd:documentation>
                Error should be ignored and the processing should continue.
                E.g. for live sync tasks, the token is advanced to the next item.
                The ignorance is not complete, though. For example, the error is recorded
                into the operationExecution item of the object being processed.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.3</a:since>
                <a:container>true</a:container>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>
    <xsd:element name="ignoreErrorReaction" type="tns:IgnoreErrorReactionType"/>

    <xsd:complexType name="StopProcessingReactionType">
        <xsd:annotation>
            <xsd:documentation>
                The processing should be stopped. This is the default strategy for live sync and async update tasks.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.3</a:since>
                <a:container>true</a:container>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <!--<xsd:sequence>-->
        <!--    <xsd:element name="status" type="c:OperationResultStatusType" minOccurs="0">-->
        <!--        <xsd:annotation>-->
        <!--            <xsd:documentation>-->
        <!--                Status that is reported as a reason for stopping the task. The default is the current operation-->
        <!--                result status.-->
        <!--            </xsd:documentation>-->
        <!--            <xsd:appinfo>-->
        <!--                <a:since>4.4</a:since>-->
        <!--            </xsd:appinfo>-->
        <!--        </xsd:annotation>-->
        <!--    </xsd:element>-->
        <!--</xsd:sequence>-->
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>
    <xsd:element name="stopProcessingReaction" type="tns:StopProcessingReactionType"/>

    <xsd:complexType name="RetryLaterReactionType">
        <xsd:annotation>
            <xsd:documentation>
                Processing of the specified account should be retried later.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.3</a:since>
                <a:container>true</a:container>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="initialInterval" type="xsd:duration" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Initial retry interval.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="nextInterval" type="xsd:duration" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        "Next" retry interval, after initial attempt.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="retryLimit" type="xsd:int" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Maximal number of retries to attempt. (Null means unlimited.)
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>
    <xsd:element name="retryLaterReaction" type="tns:RetryLaterReactionType"/>

    <xsd:complexType name="FailedObjectsSelectorType">
        <xsd:annotation>
            <xsd:documentation>
                Selects objects that were failed to be processed in previous task run(s).
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.3</a:since>
                <a:container>true</a:container>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="status" type="tns:OperationResultStatusType" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        What states to select. Default are: FATAL_ERROR and PARTIAL_ERROR.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="taskRef" type="tns:ObjectReferenceType" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        What task(s) to look for? Default is: the current task.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <a:objectReferenceTargetType>tns:TaskType</a:objectReferenceTargetType>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="timeFrom" type="xsd:dateTime" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        What is the earliest time of the record to be considered? Default: no limit here.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="timeTo" type="xsd:dateTime" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        What is the latest time of the record to be considered? Default: if explicit task OID is not specified,
                        then it is the last start timestamp of the current task root. (Just to avoid cycles in processing;
                        although maybe we are too cautious here.) If the task is different, then null.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="selectionMethod" type="tns:FailedObjectsSelectionMethodType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        How are failed objects selected. Usually there's no need to change from the default.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>
    <xsd:element name="failedObjectsSelector" type="tns:FailedObjectsSelectorType"/>

    <xsd:simpleType name="FailedObjectsSelectionMethodType">
        <xsd:annotation>
            <xsd:documentation>
                How are failed objects selected. This is to overcome some technological obstacles in
                object searching in the provisioning module.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.3</a:since>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="default">
                <xsd:annotation>
                    <xsd:documentation>
                        Default processing method. Normally narrowQuery. But when searching
                        for shadows via provisioning, fetchFailedObjects is used.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="DEFAULT"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="narrowQuery">
                <xsd:annotation>
                    <xsd:documentation>
                        Simply narrow the query by adding failed objects filter.
                        It works with repository but usually not with provisioning.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="NARROW_QUERY"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="filterAfterRetrieval">
                <xsd:annotation>
                    <xsd:documentation>
                        Uses original query to retrieve objects from a resource. Filtering is done afterwards,
                        i.e. before results are passed to the processing. This is preferable when there is
                        large percentage of failed records.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="FILTER_AFTER_RETRIEVAL"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="fetchFailedObjects">
                <xsd:annotation>
                    <xsd:documentation>
                        Failed objects are selected using the repository. Only after that, they are fetched
                        one-by-one via provisioning and processed. This is preferable when there is only
                        a small percentage of failed records.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="FETCH_FAILED_OBJECTS"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
        </xsd:restriction>
    </xsd:simpleType>

    <xsd:simpleType name="ItemProcessingOutcomeType">
        <xsd:annotation>
            <xsd:documentation>
                How item processing ended?
                Similar to operation result status, but using a different categorization.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.3</a:since>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="success">
                <xsd:annotation>
                    <xsd:documentation>
                        Item processing was considered to be successful.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="SUCCESS"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="failure">
                <xsd:annotation>
                    <xsd:documentation>
                        Item processing is considered to be failed.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="FAILURE"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="skip">
                <xsd:annotation>
                    <xsd:documentation>
                        Item processing was skipped.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="SKIP"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
        </xsd:restriction>
    </xsd:simpleType>

    <xsd:complexType name="QualifiedItemProcessingOutcomeType">
        <xsd:annotation>
            <xsd:documentation>
                Item processing outcome plus optional qualification.
            </xsd:documentation>
            <xsd:appinfo>
                <a:experimentaL>true</a:experimentaL>
                <a:container>true</a:container>
                <a:since>4.3</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="outcome" type="tns:ItemProcessingOutcomeType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Outcome of the processing (success, failure, skip).
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="qualifierUri" type="xsd:anyURI" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Optional qualifier, describing e.g. the reason for item being skipped.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>
    <xsd:element name="qualifiedItemProcessingOutcome" type="tns:QualifiedItemProcessingOutcomeType" />

    <xsd:complexType name="TaskReportingOptionsType">
        <xsd:annotation>
            <xsd:documentation>
                How should the task report its various aspects?

                EXPERIMENTAL. Will most probably change in the future.
            </xsd:documentation>
            <xsd:appinfo>
                <a:experimentaL>true</a:experimentaL>
                <a:container>true</a:container>
                <a:since>4.3</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="logging" type="tns:TaskLoggingOptionsType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        How should individual actions be logged?
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="determineExpectedTotal" type="xsd:boolean" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Should the task instance try to determine expected total (usually by counting objects before processing)?
                        Not applicable to bucketed tasks.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>
    <xsd:element name="taskReportingOptions" type="tns:TaskReportingOptionsType" />

    <xsd:complexType name="TaskLoggingOptionsType">
        <xsd:annotation>
            <xsd:documentation>
                Configures task logging aspects.
            </xsd:documentation>
            <xsd:appinfo>
                <a:experimentaL>true</a:experimentaL>
                <a:container>true</a:container>
                <a:since>4.3</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="itemCompletion" type="tns:TaskLoggingOptionType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        How should item completion be logged?
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="bucketCompletion" type="tns:TaskLoggingOptionType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        How should bucket completion be logged?
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>
    <xsd:element name="taskLoggingOptions" type="tns:TaskLoggingOptionsType" />

    <xsd:simpleType name="TaskLoggingOptionType">
        <xsd:annotation>
            <xsd:documentation>
                Option about logging a particular task-related event.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.3</a:since>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="none">
                <xsd:annotation>
                    <xsd:documentation>
                        Event should not be logged.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="NONE"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="brief">
                <xsd:annotation>
                    <xsd:documentation>
                        Event should be logged briefly, typically by writing a single log line.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="BRIEF"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="full">
                <xsd:annotation>
                    <xsd:documentation>
                        Event should be logged full. A couple of lines containing e.g. statistical information can be written.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="FULL"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
        </xsd:restriction>
    </xsd:simpleType>

    <xsd:complexType name="SynchronizationDefinitionType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.4</a:since>
                <a:container>true</a:container>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:AbstractWorkDefinitionType">
                <xsd:sequence>
                    <xsd:element name="resourceRef" type="tns:ObjectReferenceType" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                Resource against which we want to execute the synchronization.
                            </xsd:documentation>
                            <xsd:appinfo>
                                <a:displayName>SynchronizationParametersType.resourceRef</a:displayName>
                            </xsd:appinfo>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="kind" type="tns:ShadowKindType" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                TODO
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="intent" type="xsd:string" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                TODO
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="objectclass" type="xsd:QName" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                TODO
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                </xsd:sequence>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>

    <xsd:complexType name="SearchBasedPartParametersType"> <!-- FIXME -->
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:experimental>true</a:experimental>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:AbstractWorkDefinitionType">
                <xsd:sequence>
                    <xsd:element name="objectType" type="xsd:QName" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                TODO
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="objectQuery" type="q:QueryType" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                TODO
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="searchOptions" type="c:SelectorQualifiedGetOptionsType" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                TODO
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="useRepositoryDirectly" type="xsd:boolean" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                Whether to use repository directly when searching for objects.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="iterationMethod" type="c:IterationMethodType" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                How to iterate through objects. Should be used only when really needed.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                </xsd:sequence>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>
    <xsd:element name="searchBasedPartParameters" type="tns:SearchBasedPartParametersType"/>

    <xsd:complexType name="ObjectSetType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:experimental>true</a:experimental>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="type" type="xsd:QName" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        TODO
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="query" type="q:QueryType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        TODO
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="searchOptions" type="c:SelectorQualifiedGetOptionsType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        TODO
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="useRepositoryDirectly" type="xsd:boolean" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Whether to use repository directly when searching for objects.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
    </xsd:complexType>
    <xsd:element name="objectSet" type="tns:ObjectSetType"/>

    <xsd:complexType name="ResourceObjectSetType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:experimental>true</a:experimental>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="resourceRef" type="tns:ObjectReferenceType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Resource against which we want to execute the synchronization.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <a:displayName>SynchronizationParametersType.resourceRef</a:displayName>
                        <a:objectReferenceTargetType>c:ResourceType</a:objectReferenceTargetType>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="kind" type="tns:ShadowKindType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        TODO
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="intent" type="xsd:string" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        TODO
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="objectclass" type="xsd:QName" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        TODO
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="query" type="q:QueryType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        TODO
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="queryApplication" type="tns:ResourceObjectSetQueryApplicationModeType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        TODO
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="searchOptions" type="c:SelectorQualifiedGetOptionsType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        TODO
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
    </xsd:complexType>
    <xsd:element name="resourceObjectSet" type="tns:ResourceObjectSetType"/>

    <xsd:simpleType name="ResourceObjectSetQueryApplicationModeType">
        <xsd:annotation>
            <xsd:documentation>
                How should be resource object set query applied to the basic query stemming from
                resourceRef / objectclass / kind / intent specification.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.4</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="append">
                <xsd:annotation>
                    <xsd:documentation>
                        Specified query is "appended" to the default query that results from
                        the resourceRef/kind/intent/objectclass tuple.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="APPEND"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="replace">
                <xsd:annotation>
                    <xsd:documentation>
                        Specified query replaces the default query that results from
                        the resourceRef/kind/intent/objectclass tuple.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="REPLACE"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
        </xsd:restriction>
    </xsd:simpleType>

    <xsd:complexType name="RecomputationWorkDefinitionType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:experimental>true</a:experimental>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:AbstractWorkDefinitionType">
                <xsd:sequence>
                    <xsd:element name="objects" type="tns:ObjectSetType" minOccurs="0"/>
                    <xsd:element name="executionOptions" type="tns:ModelExecuteOptionsType" minOccurs="0"/>
                </xsd:sequence>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>
    <xsd:element name="recomputationDefinition" type="tns:RecomputationWorkDefinitionType"/>

    <xsd:complexType name="IterativeScriptingWorkDefinitionType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:experimental>true</a:experimental>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:ObjectSetBasedWorkDefinitionType">
                <xsd:sequence>
                    <xsd:element name="scriptExecutionRequest" type="s:ExecuteScriptType" minOccurs="0"/>
                </xsd:sequence>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>
    <xsd:element name="iterativeScriptingWorkDefinition" type="tns:IterativeScriptingWorkDefinitionType"/>

    <xsd:complexType name="FocusValidityScanWorkDefinitionType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:experimental>true</a:experimental>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:ObjectSetBasedWorkDefinitionType">
                <xsd:sequence>
                    <xsd:element name="queryStyle" type="tns:ValidityScanQueryStyleType" minOccurs="0" >
                        <xsd:annotation>
                            <xsd:documentation>
                                How to execute validation scan queries.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="validityConstraint" type="tns:TimeValidityPolicyConstraintType" minOccurs="0"/>
                </xsd:sequence>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>
    <xsd:element name="focusValidityScanWorkDefinition" type="tns:FocusValidityScanWorkDefinitionType"/>

    <xsd:simpleType name="ValidityScanQueryStyleType">
        <xsd:annotation>
            <xsd:documentation>
                How to execute validation scan queries.
            </xsd:documentation>
            <xsd:appinfo>
                <a:since>4.4</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="singleQuery">
                <xsd:annotation>
                    <xsd:documentation>
                        A single query is issued. This encompasses both objects and assignments.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="SINGLE_QUERY"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="separateObjectAndAssignmentQueries">
                <xsd:annotation>
                    <xsd:documentation>
                        Separate queries for objects and assignments are issued.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="SEPARATE_OBJECT_AND_ASSIGNMENT_QUERIES"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
        </xsd:restriction>
    </xsd:simpleType>

    <xsd:complexType name="TriggerScanWorkDefinitionType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:experimental>true</a:experimental>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:ObjectSetBasedWorkDefinitionType">
                <xsd:sequence>
                    <!-- ? -->
                </xsd:sequence>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>
    <xsd:element name="triggerScanWorkDefinition" type="tns:FocusValidityScanWorkDefinitionType"/>

    <xsd:complexType name="ShadowRefreshWorkDefinitionType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:experimental>true</a:experimental>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:AbstractWorkDefinitionType">
                <xsd:sequence>
                    <xsd:element name="shadows" type="tns:ObjectSetType" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                This is intentionally not a resource object set type, because the filtering behavior is different
                                from the usual tasks: the "has pending operations" filter is used ONLY if there is no custom
                                filter present in the work definition.

                                This is the behavior up to 4.4. It may or may not be correct. So it may change in the future.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                </xsd:sequence>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>
    <xsd:element name="shadowRefreshWorkDefinition" type="tns:ShadowRefreshWorkDefinitionType"/>

    <xsd:complexType name="ChangeExecutionWorkDefinitionType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:experimental>true</a:experimental>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:AbstractWorkDefinitionType">
                <xsd:sequence>
                    <xsd:element name="objects" type="tns:ObjectSetType" minOccurs="0"/>
                    <xsd:element name="delta" type="t:ObjectDeltaType" minOccurs="0"/>
                    <xsd:element name="executionOptions" type="tns:ModelExecuteOptionsType" minOccurs="0"/>
                </xsd:sequence>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>
    <xsd:element name="changeExecutionWorkDefinition" type="tns:ChangeExecutionWorkDefinitionType"/>

    <xsd:complexType name="ReindexingWorkDefinitionType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:experimental>true</a:experimental>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:ObjectSetBasedWorkDefinitionType">
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>
    <xsd:element name="reindexingWorkDefinition" type="tns:ReindexingWorkDefinitionType"/>

    <xsd:complexType name="ObjectSetBasedWorkDefinitionType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:experimental>true</a:experimental>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:AbstractWorkDefinitionType">
                <xsd:sequence>
                    <xsd:element name="objects" type="tns:ObjectSetType" minOccurs="0"/>
                </xsd:sequence>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>
    <xsd:element name="objectSetBasedWorkDefinition" type="tns:ObjectSetBasedWorkDefinitionType"/>

    <xsd:complexType name="ShadowCleanupWorkDefinitionType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:experimental>true</a:experimental>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:AbstractWorkDefinitionType">
                <xsd:sequence>
                    <xsd:element name="shadows" type="tns:ResourceObjectSetType" minOccurs="0"/>
                    <xsd:element name="interval" type="xsd:duration" minOccurs="0"/> <!-- TODO -->
                </xsd:sequence>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>
    <xsd:element name="shadowCleanupWorkDefinition" type="tns:ShadowCleanupWorkDefinitionType"/>

    <xsd:complexType name="ReconciliationWorkDefinitionType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:experimental>true</a:experimental>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:AbstractWorkDefinitionType">
                <xsd:sequence>
                    <xsd:element name="resourceObjects" type="tns:ResourceObjectSetType" minOccurs="0"/>
                </xsd:sequence>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>
    <xsd:element name="reconciliationDefinition" type="tns:ReconciliationWorkDefinitionType"/>

    <xsd:complexType name="AsyncUpdateWorkDefinitionType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:experimental>true</a:experimental>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:AbstractWorkDefinitionType">
                <xsd:sequence>
                    <xsd:element name="updatedResourceObjects" type="tns:ResourceObjectSetType" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                TODO - EXPERIMENTAL!!!
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                </xsd:sequence>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>
    <xsd:element name="asynchronousUpdateWorkDefinition" type="tns:AsyncUpdateWorkDefinitionType"/>

    <xsd:complexType name="ImportWorkDefinitionType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:experimental>true</a:experimental>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:AbstractWorkDefinitionType">
                <xsd:sequence>
                    <xsd:element name="resourceObjects" type="tns:ResourceObjectSetType" minOccurs="0"/>
                </xsd:sequence>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>
    <xsd:element name="importWorkDefinition" type="tns:ImportWorkDefinitionType"/>

    <xsd:complexType name="LiveSyncWorkDefinitionType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:experimental>true</a:experimental>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:AbstractWorkDefinitionType">
                <xsd:sequence>
                    <xsd:element name="resourceObjects" type="tns:ResourceObjectSetType" minOccurs="0"/>
                    <xsd:element name="batchSize" type="xsd:int" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                Batch size for live sync operations: if specified as N > 0, live synchronization fetches
                                at most N records during each provisioning.synchronize() method execution - i.e. during
                                any live sync task run. (Currently, it leaves unprocessed changes for the next live sync
                                task run. This may change in the future.)

                                USE WITH CARE. This feature assumes that the connector provides LiveSync capability
                                with preciseTokenValue = true, i.e. that it assigns sync tokens to individual changes
                                "incrementally" so it can resume live sync operation on each individual change. This
                                can be the case of SQL connectors, but e.g. not for CSV or LDAP ones.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                    <xsd:element name="updateLiveSyncTokenInDryRun" type="xsd:boolean" minOccurs="0" default="false">
                        <xsd:annotation>
                            <xsd:documentation>
                                Indicates if the LiveSync token should be updated when running in dry run mode.
                                If false (the default) then LiveSync will not update token to a new value so it
                                will process objects fetched on the next run (either dry or normal). If true, it
                                will update the token, and therefore marks objects as processed.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                </xsd:sequence>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>
    <xsd:element name="liveSynchronization" type="tns:LiveSyncWorkDefinitionType"/>

    <xsd:complexType name="CleanupWorkDefinitionType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:experimental>true</a:experimental>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:AbstractWorkDefinitionType">
                <xsd:sequence>
                    <xsd:element name="policies" type="tns:CleanupPoliciesType" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                TODO
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                </xsd:sequence>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>
    <xsd:element name="cleanupDefinition" type="tns:CleanupWorkDefinitionType"/>

    <xsd:complexType name="ReportDefinitionType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:experimental>true</a:experimental>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:AbstractWorkDefinitionType">
                <xsd:sequence>
                    <!-- TODO -->
                </xsd:sequence>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>
    <xsd:element name="reportDefinition" type="tns:ReportDefinitionType"/>

    <xsd:complexType name="GenericParametersContainerType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:container/>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:any minOccurs="0" maxOccurs="unbounded" processContents="lax">
            </xsd:any>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>
    <xsd:element name="genericParametersContainer" type="tns:GenericParametersContainerType" />

    <xsd:complexType name="AbstractWorkDefinitionType">
        <xsd:annotation>
            <xsd:documentation>
                Marker type for task part parameters.
            </xsd:documentation>
            <xsd:appinfo>
                <a:container/>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>
    <xsd:element name="abstractWorkDefinition" type="tns:AbstractWorkDefinitionType" />

    <xsd:complexType name="ResourceBasedWorkDefinitionType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:experimental>true</a:experimental>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:AbstractWorkDefinitionType">
                <xsd:sequence>
                    <xsd:element name="resourceRef" type="tns:ObjectReferenceType" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                Reference to the resource to which this activity is related to.
                            </xsd:documentation>
                            <xsd:appinfo>
                                <a:objectReferenceTargetType>tns:ResourceType</a:objectReferenceTargetType>
                            </xsd:appinfo>
                        </xsd:annotation>
                    </xsd:element>
                </xsd:sequence>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>
    <xsd:element name="resourceBasedWorkDefinition" type="tns:ResourceBasedWorkDefinitionType"/>

    <xsd:complexType name="PropagationWorkDefinitionType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:experimental>true</a:experimental>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:ResourceBasedWorkDefinitionType">
                <!--<xsd:sequence>-->
                <!--    <xsd:element name="shadows" type="tns:ObjectSetType" minOccurs="0"/>-->
                <!--</xsd:sequence>-->
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>
    <xsd:element name="propagationWorkDefinition" type="tns:PropagationWorkDefinitionType"/>

    <xsd:complexType name="MultiPropagationWorkDefinitionType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:experimental>true</a:experimental>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:AbstractWorkDefinitionType">
                <xsd:sequence>
                    <xsd:element name="resources" type="tns:ObjectSetType" minOccurs="0"/>
                </xsd:sequence>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>
    <xsd:element name="multiPropagationWorkDefinition" type="tns:MultiPropagationWorkDefinitionType"/>

    <xsd:complexType name="ActivityPathType">
        <xsd:annotation>
            <xsd:documentation>
                Path from the root of the activity tree to the specified activity.
            </xsd:documentation>
            <xsd:appinfo>
                <a:experimental>true</a:experimental>
                <!-- Intentionally not a container because of the need of path segment ordering -->
                <a:since>4.4</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="identifier" type="xsd:string" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        Identifier of the activity. Note that the identifier of the root activity is NOT included here.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
    </xsd:complexType>
    <xsd:element name="activityPath" type="tns:ActivityPathType"/>

    <xsd:complexType name="AbstractActivityWorkStateType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <!-- TEMPORARY -->
            <xsd:element name="extension" type="c:ExtensionType" minOccurs="0"/>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>
    <xsd:element name="abstractActivityWorkState" type="tns:AbstractActivityWorkStateType" />

    <!--<xsd:complexType name="RuntimeDefinedActivityWorkStateType">-->
    <!--    <xsd:annotation>-->
    <!--        <xsd:documentation>-->
    <!--            TODO-->
    <!--        </xsd:documentation>-->
    <!--        <xsd:appinfo>-->
    <!--            <a:container>true</a:container>-->
    <!--            <a:since>4.4</a:since>-->
    <!--        </xsd:appinfo>-->
    <!--    </xsd:annotation>-->
    <!--    <xsd:complexContent>-->
    <!--        <xsd:extension base="tns:AbstractActivityWorkStateType">-->
    <!--            <xsd:sequence>-->
    <!--                -->
    <!--            </xsd:sequence>-->
    <!--        </xsd:extension>-->
    <!--    </xsd:complexContent>-->
    <!--</xsd:complexType>-->
    <!--<xsd:element name="runtimeDefinedActivityWorkState" type="tns:RuntimeDefinedActivityWorkStateType" />-->

    <xsd:complexType name="PureCompositeWorkStateType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:AbstractActivityWorkStateType"/>
        </xsd:complexContent>
    </xsd:complexType>
    <xsd:element name="pureCompositeWorkState" type="tns:PureCompositeWorkStateType" />

    <xsd:complexType name="ScanWorkStateType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:AbstractActivityWorkStateType">
                <xsd:sequence>
                    <xsd:element name="lastScanTimestamp" type="xsd:dateTime" minOccurs="0" />
                </xsd:sequence>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>
    <xsd:element name="scanWorkState" type="tns:ScanWorkStateType" />

    <xsd:complexType name="ObjectIntegrityCheckWorkDefinitionType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:experimental>true</a:experimental>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:ObjectSetBasedWorkDefinitionType">
                <xsd:sequence>
                    <xsd:element name="histogramColumns" type="xsd:int" minOccurs="0" default="80"/>
                </xsd:sequence>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>
    <xsd:element name="objectIntegrityCheckWorkDefinition" type="tns:ObjectIntegrityCheckWorkDefinitionType"/>

    <xsd:complexType name="ShadowIntegrityCheckWorkDefinitionType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:experimental>true</a:experimental>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:AbstractWorkDefinitionType">
                <xsd:sequence>
                    <xsd:element name="shadows" type="tns:ObjectSetType" minOccurs="0"/>
                    <xsd:element name="diagnose" type="tns:ShadowIntegrityAspectType" minOccurs="0" maxOccurs="unbounded"/>
                    <xsd:element name="fix" type="tns:ShadowIntegrityAspectType" minOccurs="0" maxOccurs="unbounded"/>
                    <xsd:element name="checkDuplicatesOnPrimaryIdentifiersOnly" type="xsd:boolean" minOccurs="0" default="false"/>
                    <xsd:element name="duplicateShadowsResolver" type="xsd:string" minOccurs="0" />
                </xsd:sequence>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>
    <xsd:element name="shadowIntegrityCheckWorkDefinition" type="tns:ShadowIntegrityCheckWorkDefinitionType"/>

    <xsd:simpleType name="ShadowIntegrityAspectType">
        <xsd:annotation>
            <xsd:documentation>
                An aspect of shadow integrity to be diagnosed and/or fixed.
            </xsd:documentation>
        </xsd:annotation>
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="intents">
                <xsd:annotation>
                    <xsd:documentation>
                        TODO
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="INTENTS"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="uniqueness">
                <xsd:annotation>
                    <xsd:documentation>
                        TODO
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="UNIQUENESS"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="normalization">
                <xsd:annotation>
                    <xsd:documentation>
                        TODO
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="NORMALIZATION"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="owners">
                <xsd:annotation>
                    <xsd:documentation>
                        TODO
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="OWNERS"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="existenceOnResource">
                <xsd:annotation>
                    <xsd:documentation>
                        TODO
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="EXISTENCE_ON_RESOURCE"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="extraData">
                <xsd:annotation>
                    <xsd:documentation>
                        TODO
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="EXTRA_DATA"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
            <xsd:enumeration value="resourceRef">
                <xsd:annotation>
                    <xsd:documentation>
                        TODO
                    </xsd:documentation>
                    <xsd:appinfo>
                        <jaxb:typesafeEnumMember name="RESOURCE_REF"/>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:enumeration>
        </xsd:restriction>
    </xsd:simpleType>

    <xsd:complexType name="DelegationWorkStateType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:AbstractActivityWorkStateType">
                <xsd:sequence>
                    <xsd:element name="taskRef" type="tns:ObjectReferenceType" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                A reference to the delegate subtask.
                            </xsd:documentation>
                            <xsd:appinfo>
                                <a:objectReferenceTargetType>tns:TaskType</a:objectReferenceTargetType>
                            </xsd:appinfo>
                        </xsd:annotation>
                    </xsd:element>
                </xsd:sequence>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>
    <xsd:element name="delegationWorkState" type="tns:DelegationWorkStateType" />

    <xsd:complexType name="DistributionWorkStateType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:AbstractActivityWorkStateType">
                <xsd:sequence>
                    <xsd:element name="taskRef" type="tns:ObjectReferenceType" minOccurs="0" maxOccurs="unbounded">
                        <xsd:annotation>
                            <xsd:documentation>
                                References to worker subtasks.
                            </xsd:documentation>
                            <xsd:appinfo>
                                <a:objectReferenceTargetType>tns:TaskType</a:objectReferenceTargetType>
                            </xsd:appinfo>
                        </xsd:annotation>
                    </xsd:element>
                </xsd:sequence>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>
    <xsd:element name="distributionWorkState" type="tns:DistributionWorkStateType" />

    <!-- TODO consider removal -->
    <xsd:complexType name="PropagationWorkStateType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:AbstractActivityWorkStateType"/>
        </xsd:complexContent>
    </xsd:complexType>
    <xsd:element name="propagationWorkState" type="tns:PropagationWorkStateType" />

    <xsd:complexType name="ReconciliationWorkStateType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:AbstractActivityWorkStateType">
                <xsd:sequence>
                    <xsd:element name="resourceObjectsReconciliationStartTimestamp" type="xsd:dateTime" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                When did the resource objects reconciliation start? This information is used in the last
                                activity (remaining shadows), where we look for shadows with synchronization timestamp less
                                than this value - i.e. ones that were not touched by resource object reconciliation activity.
                            </xsd:documentation>
                        </xsd:annotation>
                    </xsd:element>
                </xsd:sequence>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>
    <xsd:element name="reconciliationWorkState" type="tns:ReconciliationWorkStateType" />

    <xsd:complexType name="LiveSyncWorkStateType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:complexContent>
            <xsd:extension base="tns:AbstractActivityWorkStateType">
                <xsd:sequence>
                    <xsd:element name="token" type="xsd:anyType" minOccurs="0">
                        <xsd:annotation>
                            <xsd:documentation>
                                The token value.
                            </xsd:documentation>
                            <xsd:appinfo>
                                <a:rawType>true</a:rawType> <!-- TODO ok? -->
                            </xsd:appinfo>
                        </xsd:annotation>
                    </xsd:element>
                </xsd:sequence>
            </xsd:extension>
        </xsd:complexContent>
    </xsd:complexType>
    <xsd:element name="liveSyncWorkState" type="tns:LiveSyncWorkStateType" />

    <xsd:complexType name="WorkersReconciliationResultType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="rootTaskRef" type="tns:ObjectReferenceType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Root task.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <a:objectReferenceTargetType>tns:TaskType</a:objectReferenceTargetType>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="coordinatorTaskRef" type="tns:ObjectReferenceType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Coordinator task.
                    </xsd:documentation>
                    <xsd:appinfo>
                        <a:objectReferenceTargetType>tns:TaskType</a:objectReferenceTargetType>
                    </xsd:appinfo>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="activityPath" type="tns:ActivityPathType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Path of distributed activity.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="existing" type="xsd:int" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Number of existing worker tasks on start.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="required" type="xsd:int" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Number of required worker tasks.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="matched" type="xsd:int" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Number of worker tasks that matched their specification.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="renamed" type="xsd:int" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Number of worker tasks that were renamed to match their specification.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="closedExecuting" type="xsd:int" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Number of executing worker tasks that were closed.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="moved" type="xsd:int" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Number of worker tasks that were moved.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="closedSuperfluous" type="xsd:int" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Number of worker tasks that were closed as superfluous.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="closedDone" type="xsd:int" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Number of worker tasks that were closed because the work was done.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="created" type="xsd:int" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Number of worker tasks that were created.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
    </xsd:complexType>
    <xsd:element name="workersReconciliationResult" type="tns:WorkersReconciliationResultType" />

    <xsd:complexType name="AutoscalingConfigurationType">
        <xsd:annotation>
            <xsd:documentation>
                TODO
            </xsd:documentation>
            <xsd:appinfo>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="enabled" type="xsd:boolean" minOccurs="0" default="true">
                <xsd:annotation>
                    <xsd:documentation>
                        Is autoscaling enabled for this activity? The default is "true" if the autoscaling configuration
                        exists. (Note that this may change in the future.)
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
    </xsd:complexType>

    <xsd:complexType name="ActivityCounterGroupsType">
        <xsd:annotation>
            <xsd:documentation>
                Counters related to the execution of the activity, grouped into related categories.
            </xsd:documentation>
            <xsd:appinfo>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="policyRules" type="tns:ActivityCounterGroupType" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Counters for policy rules.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>

    <xsd:complexType name="ActivityCounterGroupType">
        <xsd:annotation>
            <xsd:documentation>
                A group of related counters.
            </xsd:documentation>
            <xsd:appinfo>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="counter" type="tns:ActivityCounterType" minOccurs="0" maxOccurs="unbounded">
                <xsd:annotation>
                    <xsd:documentation>
                        A single counter.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>

    <xsd:complexType name="ActivityCounterType">
        <xsd:annotation>
            <xsd:documentation>
                A single counter.
            </xsd:documentation>
            <xsd:appinfo>
                <a:container>true</a:container>
                <a:since>4.4</a:since>
                <a:experimental>true</a:experimental>
            </xsd:appinfo>
        </xsd:annotation>
        <xsd:sequence>
            <xsd:element name="identifier" type="xsd:string" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Counter identifier (key).
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <xsd:element name="value" type="xsd:int" minOccurs="0">
                <xsd:annotation>
                    <xsd:documentation>
                        Current counter value.
                    </xsd:documentation>
                </xsd:annotation>
            </xsd:element>
            <!-- TODO other data, like start timestamp (maybe) -->
        </xsd:sequence>
        <xsd:attribute name="id" type="xsd:long"/>
    </xsd:complexType>
</xsd:schema>
